"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../../../../utils/util");
const api_1 = require("../../../../utils/api");
Page({
    data: {
        mac: '',
        terminal: {},
    },
    onLoad: function (options) {
        this.setData({
            mac: options.mac
        });
        this.start();
    },
    start() {
        api_1.default.getTerminal(this.data.mac).then(el => {
            if (el.code) {
                this.setData({
                    terminal: el.data
                });
            }
        });
    },
    async deleteMountDev(event) {
        const { item } = event.currentTarget.dataset;
        wx.showModal({
            title: '解除挂载！！',
            content: `确定解除挂载设备：${item.mountDev} ？？`,
            success: (res) => {
                if (res.confirm) {
                    api_1.default.delTerminalMountDev(this.data.mac, item.pid).then(() => {
                        this.start();
                    });
                }
            }
        });
    },
    addMonutDev() {
        wx.navigateTo({
            url: '/pages/index/manageDev/addMountDev/addMountDev' + (0, util_1.ObjectToStrquery)({ mac: this.data.mac }),
            events: {
                addSuccess() {
                    wx.nextTick(() => {
                        setTimeout(() => {
                            wx.startPullDownRefresh();
                        }, 500);
                    });
                }
            }
        });
    },
    async deleteDTU() {
        const { name, DevMac } = this.data.terminal;
        const del = await wx.showModal({
            title: `删除DTU`,
            content: `是否删除DTU:${name}?`,
        });
        if (del.confirm) {
            api_1.default.delUserTerminal(DevMac).then(() => {
                wx.navigateBack();
            });
        }
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
        this.start();
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function () {
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW91bnREZXZzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW91bnREZXZzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQXlEO0FBQ3pELCtDQUF1QztBQUN2QyxJQUFJLENBQUM7SUFLSCxJQUFJLEVBQUU7UUFDSixHQUFHLEVBQUUsRUFBRTtRQUNQLFFBQVEsRUFBRSxFQUFtQjtLQUM5QjtJQUtELE1BQU0sRUFBRSxVQUFVLE9BQXdCO1FBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxHQUFHLEVBQUUsT0FBTyxDQUFDLEdBQUc7U0FDakIsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ2QsQ0FBQztJQUVELEtBQUs7UUFDSCxhQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ3ZDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNaLElBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1gsUUFBUSxFQUFFLEVBQUUsQ0FBQyxJQUFJO2lCQUNsQixDQUFDLENBQUE7WUFDSixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBR0QsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUF3QztRQUMzRCxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUE7UUFDNUMsRUFBRSxDQUFDLFNBQVMsQ0FBQztZQUNYLEtBQUssRUFBRSxRQUFRO1lBQ2YsT0FBTyxFQUFFLFlBQVksSUFBSSxDQUFDLFFBQVEsS0FBSztZQUN2QyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDZixJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDaEIsYUFBRyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO3dCQUN6RCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7b0JBQ2QsQ0FBQyxDQUFDLENBQUE7Z0JBQ0osQ0FBQztZQUNILENBQUM7U0FDRixDQUFDLENBQUE7SUFFSixDQUFDO0lBRUQsV0FBVztRQUNULEVBQUUsQ0FBQyxVQUFVLENBQUM7WUFDWixHQUFHLEVBQUUsZ0RBQWdELEdBQUcsSUFBQSx1QkFBZ0IsRUFBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ2hHLE1BQU0sRUFBRTtnQkFDTixVQUFVO29CQUNSLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFO3dCQUNmLFVBQVUsQ0FBQyxHQUFHLEVBQUU7NEJBQ2QsRUFBRSxDQUFDLG9CQUFvQixFQUFFLENBQUE7d0JBQzNCLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtvQkFDVCxDQUFDLENBQUMsQ0FBQTtnQkFDSixDQUFDO2FBQ0Y7U0FDRixDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsS0FBSyxDQUFDLFNBQVM7UUFDYixNQUFNLEVBQUcsSUFBSSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFBO1FBQzVDLE1BQU0sR0FBRyxHQUFHLE1BQU0sRUFBRSxDQUFDLFNBQVMsQ0FBQztZQUM3QixLQUFLLEVBQUUsT0FBTztZQUNkLE9BQU8sRUFBRSxXQUFXLElBQUksR0FBRztTQUM1QixDQUFDLENBQUE7UUFFRixJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNoQixhQUFHLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7Z0JBQ3BDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtZQUNuQixDQUFDLENBQUMsQ0FBQTtRQXNCSixDQUFDO0lBQ0gsQ0FBQztJQUtELE9BQU8sRUFBRTtJQUVULENBQUM7SUFLRCxNQUFNLEVBQUU7SUFFUixDQUFDO0lBS0QsTUFBTSxFQUFFO0lBRVIsQ0FBQztJQUtELFFBQVEsRUFBRTtJQUVWLENBQUM7SUFLRCxpQkFBaUIsRUFBRTtRQUNqQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDZCxDQUFDO0lBS0QsYUFBYSxFQUFFO0lBRWYsQ0FBQztJQUtELGlCQUFpQixFQUFFO0lBRW5CLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYmplY3RUb1N0cnF1ZXJ5IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3V0aWxzL3V0aWxcIlxuaW1wb3J0IGFwaSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbHMvYXBpXCJcblBhZ2Uoe1xuXG4gIC8qKlxuICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cbiAgICovXG4gIGRhdGE6IHtcbiAgICBtYWM6ICcnLFxuICAgIHRlcm1pbmFsOiB7fSBhcyBVYXJ0LlRlcm1pbmFsLFxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWKoOi9vVxuICAgKi9cbiAgb25Mb2FkOiBmdW5jdGlvbiAob3B0aW9uczogeyBtYWM6IHN0cmluZyB9KSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG1hYzogb3B0aW9ucy5tYWNcbiAgICB9KVxuICAgIHRoaXMuc3RhcnQoKVxuICB9LFxuXG4gIHN0YXJ0KCkge1xuICAgIGFwaS5nZXRUZXJtaW5hbCh0aGlzLmRhdGEubWFjKS50aGVuKGVsID0+IHtcbiAgICAgIGlmIChlbC5jb2RlKSB7XG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgdGVybWluYWw6IGVsLmRhdGFcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIC8vIOWIoOmZpERUVeaMgui9veiuvuWkh1xuICBhc3luYyBkZWxldGVNb3VudERldihldmVudDogdmFudEV2ZW50PFVhcnQuVGVybWluYWxNb3VudERldnM+KSB7XG4gICAgY29uc3QgeyBpdGVtIH0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXRcbiAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgdGl0bGU6ICfop6PpmaTmjILovb3vvIHvvIEnLFxuICAgICAgY29udGVudDogYOehruWumuino+mZpOaMgui9veiuvuWkh++8miR7aXRlbS5tb3VudERldn0g77yf77yfYCxcbiAgICAgIHN1Y2Nlc3M6IChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5jb25maXJtKSB7XG4gICAgICAgICAgYXBpLmRlbFRlcm1pbmFsTW91bnREZXYodGhpcy5kYXRhLm1hYywgaXRlbS5waWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgfSxcbiAgLy8g5re75Yqg57uR5a6a6K6+5aSHXG4gIGFkZE1vbnV0RGV2KCkge1xuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOiAnL3BhZ2VzL2luZGV4L21hbmFnZURldi9hZGRNb3VudERldi9hZGRNb3VudERldicgKyBPYmplY3RUb1N0cnF1ZXJ5KHsgbWFjOiB0aGlzLmRhdGEubWFjIH0pLFxuICAgICAgZXZlbnRzOiB7XG4gICAgICAgIGFkZFN1Y2Nlc3MoKSB7XG4gICAgICAgICAgd3gubmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHd4LnN0YXJ0UHVsbERvd25SZWZyZXNoKClcbiAgICAgICAgICAgIH0sIDUwMClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgLy8g5Yig6ZmkRFRVXG4gIGFzeW5jIGRlbGV0ZURUVSgpIHtcbiAgICBjb25zdCB7ICBuYW1lLCBEZXZNYWMgfSA9IHRoaXMuZGF0YS50ZXJtaW5hbFxuICAgIGNvbnN0IGRlbCA9IGF3YWl0IHd4LnNob3dNb2RhbCh7XG4gICAgICB0aXRsZTogYOWIoOmZpERUVWAsXG4gICAgICBjb250ZW50OiBg5piv5ZCm5Yig6ZmkRFRVOiR7bmFtZX0/YCxcbiAgICB9KVxuXG4gICAgaWYgKGRlbC5jb25maXJtKSB7XG4gICAgICBhcGkuZGVsVXNlclRlcm1pbmFsKERldk1hYykudGhlbigoKSA9PiB7XG4gICAgICAgIHd4Lm5hdmlnYXRlQmFjaygpXG4gICAgICB9KVxuICAgICAgLyogaWYgKG1vdW50RGV2cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgdGl0bGU6ICdUaXAnLFxuICAgICAgICAgIGNvbnRlbnQ6IGDmmK/lkKbliKDpmaREVFXnu5HlrprnmoTmiYDmnInorr7lpIc/YCxcbiAgICAgICAgICBzdWNjZXNzOiBhc3luYyAocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLmNvbmZpcm0pIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgZGV2IG9mIG1vdW50RGV2cykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwaS5kZWxUZXJtaW5hbE1vdW50RGV2KERldk1hYywgZGV2LnBpZClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXBpLmRlbFVzZXJUZXJtaW5hbChEZXZNYWMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHd4Lm5hdmlnYXRlQmFjaygpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBpLmRlbFVzZXJUZXJtaW5hbChEZXZNYWMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHd4Lm5hdmlnYXRlQmFjaygpXG4gICAgICAgIH0pXG4gICAgICB9ICovXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWIneasoea4suafk+WujOaIkFxuICAgKi9cbiAgb25SZWFkeTogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5pi+56S6XG4gICAqL1xuICBvblNob3c6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xuICAgKi9cbiAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLljbjovb1cbiAgICovXG4gIG9uVW5sb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i55u45YWz5LqL5Lu25aSE55CG5Ye95pWwLS3nm5HlkKznlKjmiLfkuIvmi4nliqjkvZxcbiAgICovXG4gIG9uUHVsbERvd25SZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zdGFydCgpXG4gIH0sXG5cbiAgLyoqXG4gICAqIOmhtemdouS4iuaLieinpuW6leS6i+S7tueahOWkhOeQhuWHveaVsFxuICAgKi9cbiAgb25SZWFjaEJvdHRvbTogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUqOaIt+eCueWHu+WPs+S4iuinkuWIhuS6q1xuICAgKi9cbiAgb25TaGFyZUFwcE1lc3NhZ2U6IGZ1bmN0aW9uICgpIHtcblxuICB9XG59KSJdfQ==