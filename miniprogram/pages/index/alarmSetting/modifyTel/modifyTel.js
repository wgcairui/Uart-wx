"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../../../../utils/util");
Page({
    data: {
        tel: [],
        mail: []
    },
    onLoad: function () {
        const eventChannel = this.getOpenerEventChannel();
        eventChannel.on("alarm", ({ tel, mail }) => {
            this.setData({
                tel,
                mail
            });
        });
    },
    addTel() {
        const tel = [...this.data.tel, ''];
        this.setData({
            tel
        });
    },
    addMail() {
        const mail = [...this.data.mail, ''];
        this.setData({
            mail
        });
    },
    modifyTel(e) {
        const old = e.currentTarget.dataset.key;
        const newVal = e.detail.value;
        if ((0, util_1.RgexpTel)(newVal) || newVal.length === 0) {
            const i = this.data.tel.findIndex(el => el === old);
            this.data.tel.splice(i, 1, newVal);
            this.setData({
                tel: this.data.tel.filter(el => el)
            });
        }
        else {
            wx.showModal({
                content: `${newVal}不是正确的手机号格式`,
                title: "号码错误"
            });
        }
    },
    modifyMail(e) {
        const old = e.currentTarget.dataset.key;
        const newVal = e.detail.value;
        if ((0, util_1.RgexpMail)(newVal) || newVal.length === 0) {
            const i = this.data.mail.findIndex(el => el === old);
            this.data.mail.splice(i, 1, newVal);
            this.setData({
                mail: this.data.mail.filter(el => el)
            });
        }
        else {
            wx.showModal({
                content: `${newVal}不是正确的邮箱格式`,
                title: "邮箱错误"
            });
        }
    },
    submit() {
        const eventChannel = this.getOpenerEventChannel();
        const { tel, mail } = this.data;
        eventChannel.emit("modifyOk", { tel: tel.filter(el => (0, util_1.RgexpTel)(el)), mail: mail.filter(el => (0, util_1.RgexpMail)(el)) });
        wx.navigateBack();
    },
    disbledSumbit() {
        return this.data.mail.every(el => (0, util_1.RgexpMail)(el)) && this.data.tel.every(el => (0, util_1.RgexpTel)(el));
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function () {
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kaWZ5VGVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kaWZ5VGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsaURBQTREO0FBQzVELElBQUksQ0FBQztJQUtILElBQUksRUFBRTtRQUNKLEdBQUcsRUFBRSxFQUFjO1FBQ25CLElBQUksRUFBRSxFQUFjO0tBQ3JCO0lBS0QsTUFBTSxFQUFFO1FBQ04sTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUE7UUFDakQsWUFBWSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQXFDLEVBQUUsRUFBRTtZQUM1RSxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUNYLEdBQUc7Z0JBQ0gsSUFBSTthQUNMLENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELE1BQU07UUFDSixNQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUE7UUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLEdBQUc7U0FDSixDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsT0FBTztRQUNMLE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUNwQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsSUFBSTtTQUNMLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFRCxTQUFTLENBQUMsQ0FBWTtRQUNwQixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUE7UUFDdkMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFlLENBQUE7UUFDdkMsSUFBSSxJQUFBLGVBQVEsRUFBQyxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUMs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QkFBaUIsRUFBRTtJQUVuQixDQUFDO0lBS0QsYUFBYSxFQUFFO0lBRWYsQ0FBQztJQUtELGlCQUFpQixFQUFFO0lBRW5CLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9pbmRleC9hbGFybVNldHRpbmcvbW9kaWZ5VGVsL21vZGlmeVRlbC5qc1xuaW1wb3J0IHsgUmdleHBNYWlsLCBSZ2V4cFRlbCB9IGZyb20gXCIuLi8uLi8uLi8uLi91dGlscy91dGlsXCJcblBhZ2Uoe1xuXG4gIC8qKlxuICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cbiAgICovXG4gIGRhdGE6IHtcbiAgICB0ZWw6IFtdIGFzIHN0cmluZ1tdLFxuICAgIG1haWw6IFtdIGFzIHN0cmluZ1tdXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yqg6L29XG4gICAqL1xuICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBldmVudENoYW5uZWwgPSB0aGlzLmdldE9wZW5lckV2ZW50Q2hhbm5lbCgpXG4gICAgZXZlbnRDaGFubmVsLm9uKFwiYWxhcm1cIiwgKHsgdGVsLCBtYWlsIH06IHsgdGVsOiBzdHJpbmdbXSwgbWFpbDogc3RyaW5nW10gfSkgPT4ge1xuICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgdGVsLFxuICAgICAgICBtYWlsXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgYWRkVGVsKCkge1xuICAgIGNvbnN0IHRlbCA9IFsuLi50aGlzLmRhdGEudGVsLCAnJ11cbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgdGVsXG4gICAgfSlcbiAgfSxcblxuICBhZGRNYWlsKCkge1xuICAgIGNvbnN0IG1haWwgPSBbLi4udGhpcy5kYXRhLm1haWwsICcnXVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBtYWlsXG4gICAgfSlcbiAgfSxcblxuICBtb2RpZnlUZWwoZTogdmFudEV2ZW50KSB7XG4gICAgY29uc3Qgb2xkID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5XG4gICAgY29uc3QgbmV3VmFsID0gZS5kZXRhaWwudmFsdWUgYXMgc3RyaW5nXG4gICAgaWYgKFJnZXhwVGVsKG5ld1ZhbCkgfHwgbmV3VmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgaSA9IHRoaXMuZGF0YS50ZWwuZmluZEluZGV4KGVsID0+IGVsID09PSBvbGQpXG4gICAgICB0aGlzLmRhdGEudGVsLnNwbGljZShpLCAxLCBuZXdWYWwpXG4gICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICB0ZWw6IHRoaXMuZGF0YS50ZWwuZmlsdGVyKGVsID0+IGVsKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgY29udGVudDogYCR7bmV3VmFsfeS4jeaYr+ato+ehrueahOaJi+acuuWPt+agvOW8j2AsXG4gICAgICAgIHRpdGxlOiBcIuWPt+eggemUmeivr1wiXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBtb2RpZnlNYWlsKGU6IHZhbnRFdmVudCkge1xuICAgIGNvbnN0IG9sZCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmtleVxuICAgIGNvbnN0IG5ld1ZhbCA9IGUuZGV0YWlsLnZhbHVlIGFzIHN0cmluZ1xuICAgIGlmIChSZ2V4cE1haWwobmV3VmFsKSB8fCBuZXdWYWwubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBpID0gdGhpcy5kYXRhLm1haWwuZmluZEluZGV4KGVsID0+IGVsID09PSBvbGQpXG4gICAgICB0aGlzLmRhdGEubWFpbC5zcGxpY2UoaSwgMSwgbmV3VmFsKVxuICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgbWFpbDogdGhpcy5kYXRhLm1haWwuZmlsdGVyKGVsID0+IGVsKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgY29udGVudDogYCR7bmV3VmFsfeS4jeaYr+ato+ehrueahOmCrueuseagvOW8j2AsXG4gICAgICAgIHRpdGxlOiBcIumCrueusemUmeivr1wiXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBzdWJtaXQoKSB7XG4gICAgLyogaWYoIXRoaXMuZGlzYmxlZFN1bWJpdCgpKSB7XG4gICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICB0aXRsZTpcIuiBlOezu+aWueW8j+S4jeiDveepulwiLFxuICAgICAgICBpY29uOlwiZXJyb3JcIlxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH0gKi9cbiAgICBjb25zdCBldmVudENoYW5uZWwgPSB0aGlzLmdldE9wZW5lckV2ZW50Q2hhbm5lbCgpXG4gICAgY29uc3QgeyB0ZWwsIG1haWwgfSA9IHRoaXMuZGF0YVxuICAgIGV2ZW50Q2hhbm5lbC5lbWl0KFwibW9kaWZ5T2tcIiwgeyB0ZWw6IHRlbC5maWx0ZXIoZWwgPT4gUmdleHBUZWwoZWwpKSwgbWFpbDogbWFpbC5maWx0ZXIoZWwgPT4gUmdleHBNYWlsKGVsKSkgfSlcbiAgICB3eC5uYXZpZ2F0ZUJhY2soKVxuICB9LFxuXG4gIGRpc2JsZWRTdW1iaXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tYWlsLmV2ZXJ5KGVsID0+IFJnZXhwTWFpbChlbCkpICYmIHRoaXMuZGF0YS50ZWwuZXZlcnkoZWwgPT4gUmdleHBUZWwoZWwpKVxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWIneasoea4suafk+WujOaIkFxuICAgKi9cbiAgb25SZWFkeTogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5pi+56S6XG4gICAqL1xuICBvblNob3c6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xuICAgKi9cbiAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLljbjovb1cbiAgICovXG4gIG9uVW5sb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i55u45YWz5LqL5Lu25aSE55CG5Ye95pWwLS3nm5HlkKznlKjmiLfkuIvmi4nliqjkvZxcbiAgICovXG4gIG9uUHVsbERvd25SZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i5LiK5ouJ6Kem5bqV5LqL5Lu255qE5aSE55CG5Ye95pWwXG4gICAqL1xuICBvblJlYWNoQm90dG9tOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55So5oi354K55Ye75Y+z5LiK6KeS5YiG5LqrXG4gICAqL1xuICBvblNoYXJlQXBwTWVzc2FnZTogZnVuY3Rpb24gKCkge1xuXG4gIH1cbn0pIl19