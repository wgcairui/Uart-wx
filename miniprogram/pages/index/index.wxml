<!--index.wxml-->
<import src="index.skeleton.wxml" />
<template is="skeleton" wx-if="{{loading}}" />
<view class="container">
  <van-notice-bar wx:if="{{alarm}}" left-icon="volume-o" text="{{alarm}}" mode="link" bindtap="seeAlarm" />
  <van-notice-bar color="#1989fa" background="#ecf9ff" left-icon="info-o" text="{{state}}" />
  <view class="content">

    <view class="card" wx:for="{{DTUs}}" wx:key="_id">
      <view class="terminal" data-item="{{item._id}}" bindtap="showDTUInfo">
        <text class="name">{{item.name}}</text>
        <text class="mac">{{item.DevMac}}</text>
        <van-tag type="{{item.online?'success':'danger'}}">{{item.online?'在线':'离线'}}</van-tag>
        <!--  <van-button data-item="{{item._id}}" size="small" round plain type="primary" bind:click="showDTUInfo"
          class="right">DTU状态
        </van-button> -->
      </view>
      <van-cell is-link wx:for="{{item.mountDevs}}" wx:for-item="item2" wx:key="pid" bind:click="showMountDevData"
        data-item="{{item2}}" data-id="{{item._id}}" use-label-slot center>
        <view slot="icon">
          <van-icon color="{{item2.online?'green':'red'}}" name="points"></van-icon>
        </view>
        <view slot="title">
          <view class="van-cell-text">{{item2.mountDev}}</view>
          <van-tag type="primary">{{item2.Type}}</van-tag>
        </view>
        <view slot="label">
          <view>{{item2.online?'在线':'离线'}}</view>
        </view>
      </van-cell>
      <!-- 
      <van-row gutter="10">
        <van-col span="12" wx:for="{{item.mountDevs}}" wx:for-item="item2" wx:key="pid">
          <view class="card">
            <view class="mountDev">
              <text>{{item2.mountDev}}</text>
              <text>{{item2.Type}}</text>
              <text>{{item2.online?'在线':'离线'}}</text>

              <van-button data-item="{{item2}}" data-id="{{item._id}}" size="small" round plain type="primary"
                bind:click="showMountDevData" class="right">DTU状态
              </van-button>
            </view>
          </view>
        </van-col>
      </van-row>
 -->
    </view>
    <!-- <van-panel wx:for="{{DTUs}}" wx:key="_id" title="{{item.name}}" desc="{{item.DevMac}}"
      status="{{item.online?'在线':'离线'}}" use-footer-slot>
      <view>
        <van-cell is-link wx:for="{{item.mountDevs}}" wx:for-item="item2" wx:key="pid" bind:click="showMountDevData"
          data-item="{{item2}}" data-id="{{item._id}}" use-label-slot center>
          <view slot="icon">
            <van-icon color="{{item2.online?'green':'red'}}" name="points"></van-icon>
          </view>
          <view slot="title">
            <view class="van-cell-text">{{item2.mountDev}}</view>
            <van-tag type="primary">{{item2.Type}}</van-tag>
          </view>
          <view slot="label">
            <view>{{item2.online?'在线':'离线'}}</view>
          </view>
        </van-cell>
      </view>
      <view slot="footer">
        <van-button data-item="{{item._id}}" size="small" round plain type="primary" bind:click="showDTUInfo"
          class="right">DTU状态
        </van-button>
      </view>
    </van-panel> -->
  </view>
  <official-account bindload="bindload" binderror="binderror"></official-account>
</view>