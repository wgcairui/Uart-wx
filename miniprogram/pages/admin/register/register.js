"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const api_1 = require("../../../utils/api");
Page({
    data: {
        mac: '',
        bind: '',
        dtus: [],
        nodes: [],
        radio: ''
    },
    onLoad: function () {
        this.getNodes();
    },
    async scanMac() {
        const scanResult = await wx.scanCode({});
        this.setData({
            mac: scanResult.result
        });
        this.addDtus();
    },
    scanRequst() {
        this.addDtus();
    },
    async addDtus() {
        const { mac, bind, radio } = this.data;
        if (mac.length !== 12) {
            wx.showModal({
                content: `${mac}长度异常,请核对是否正确??`
            });
        }
        if (this.data.dtus.findIndex(el => el.DevMac === mac) !== -1) {
            console.log('重复扫描');
            return;
        }
        this.setData({
            mac,
            dtus: [{ DevMac: mac, bindDev: bind, mountNode: radio }, ...this.data.dtus]
        });
        const dtulen = this.data.dtus.length;
        for (let node of this.data.nodes) {
            if (node.MaxConnections - (node.count || 0) > dtulen) {
                this.setData({
                    radio: node.Name
                });
                break;
            }
        }
    },
    onChange_Node(event) {
        console.log(event);
    },
    rmDtu(event) {
        const mac = event.currentTarget.dataset.key;
        wx.showModal({
            title: '删除dtu',
            content: `确定删除dtu:${mac} ??`,
            success: (res) => {
                if (res.confirm) {
                    this.setData({
                        dtus: this.data.dtus.filter(el => el.DevMac !== mac)
                    });
                }
            }
        });
    },
    async getNodes() {
        const { data } = await api_1.default.Nodes();
        this.setData({
            nodes: data,
            radio: data[0].Name
        });
    },
    changeNode(event) {
        this.setData({
            radio: event.detail,
        });
    },
    selectNode(event) {
        const item = event.currentTarget.dataset.item;
        this.setData({
            radio: item.Name
        });
    },
    submit() {
        const { dtus, radio } = this.data;
        wx.showModal({
            title: '提交核对',
            content: `本次提交的dtu数目:${dtus.length},挂载的节点为:${radio},`,
            success: async () => {
                const all = await Promise.all(dtus.map(el => api_1.default.addRegisterTerminal(el.DevMac, el.mountNode)));
                if (all.length === dtus.length) {
                    wx.showModal({
                        title: '提交成功',
                        content: `成功提交[${all.length}] 个设备`
                    });
                    this.getNodes();
                    this.setData({
                        dtus: [],
                        mac: ''
                    });
                }
                else {
                    wx.showModal({
                        title: '提交错误',
                        content: '提交错误'
                    });
                }
            }
        });
    },
    copy() {
        const mac = this.data.dtus.map(el => '866' + el.DevMac).join("\n");
        wx.setClipboardData({
            data: mac,
            success() {
                wx.showToast({
                    title: 'success'
                });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZWdpc3Rlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDRDQUFxQztBQUdyQyxJQUFJLENBQUM7SUFLSCxJQUFJLEVBQUU7UUFDSixHQUFHLEVBQUUsRUFBRTtRQUNQLElBQUksRUFBRSxFQUFFO1FBQ1IsSUFBSSxFQUFFLEVBQTZCO1FBQ25DLEtBQUssRUFBRSxFQUF1QjtRQUM5QixLQUFLLEVBQUUsRUFBRTtLQUNWO0lBS0QsTUFBTSxFQUFFO1FBQ04sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO0lBQ2pCLENBQUM7SUFHRCxLQUFLLENBQUMsT0FBTztRQUNYLE1BQU0sVUFBVSxHQUFHLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUV4QyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsR0FBRyxFQUFFLFVBQVUsQ0FBQyxNQUFNO1NBQ3ZCLENBQUMsQ0FBQTtRQUNGLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQixDQUFDO0lBV0QsVUFBVTtRQVVSLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQixDQUFDO0lBR0QsS0FBSyxDQUFDLE9BQU87UUFDWCxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFBO1FBRXRDLElBQUcsR0FBRyxDQUFDLE1BQU0sS0FBSyxFQUFFLEVBQUMsQ0FBQztZQUNwQixFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNYLE9BQU8sRUFBQyxHQUFHLEdBQUcsZ0JBQWdCO2FBQy9CLENBQUMsQ0FBQTtRQUNKLENBQUM7UUFDRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEtBQUssR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQztZ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XG4vLyBtaW5pcHJvZ3JhbS9wYWdlcy9hZG1pbi9yZWdpc3Rlci9yZWdpc3Rlci5qc1xuUGFnZSh7XG5cbiAgLyoqXG4gICAqIOmhtemdoueahOWIneWni+aVsOaNrlxuICAgKi9cbiAgZGF0YToge1xuICAgIG1hYzogJycsXG4gICAgYmluZDogJycsXG4gICAgZHR1czogW10gYXMgVWFydC5SZWdpc3RlclRlcm1pbmFsW10sXG4gICAgbm9kZXM6IFtdIGFzIFVhcnQuTm9kZUNsaWVudFtdLFxuICAgIHJhZGlvOiAnJ1xuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWKoOi9vVxuICAgKi9cbiAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nZXROb2RlcygpXG4gIH0sXG5cbiAgLy8g6LCD55So5b6u5L+hYXBp77yM5omr5o+PRFRV5p2h5b2i56CBXG4gIGFzeW5jIHNjYW5NYWMoKSB7XG4gICAgY29uc3Qgc2NhblJlc3VsdCA9IGF3YWl0IHd4LnNjYW5Db2RlKHt9KVxuICAgIC8vY29uc3QgeyBjb2RlLCBkYXRhIH0gPSBhd2FpdCBhcGkuZ2V0VGVybWluYWwoc2NhblJlc3VsdC5yZXN1bHQpXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG1hYzogc2NhblJlc3VsdC5yZXN1bHRcbiAgICB9KVxuICAgIHRoaXMuYWRkRHR1cygpXG4gIH0sXG5cbiAgLyogYXN5bmMgc2NhbkJpbmQoKSB7XG4gICAgY29uc3Qgc2NhblJlc3VsdCA9IGF3YWl0IHd4LnNjYW5Db2RlKHt9KVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBiaW5kOiBzY2FuUmVzdWx0LnJlc3VsdFxuICAgIH0pXG4gICAgaWYgKHRoaXMuZGF0YS5tYWMgJiYgdGhpcy5kYXRhLmJpbmQpIHRoaXMuYWRkRHR1cygpXG4gIH0sICovXG5cbiAgLy8g5Yqg5YWlZHR1c1xuICBzY2FuUmVxdXN0KCkge1xuICAgIC8qIGlmICghdGhpcy5kYXRhLmJpbmQpIHtcbiAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgIHRpdGxlOiAn5Y+C5pWw5LiN5a6M5pW0JyxcbiAgICAgICAgY29udGVudDogJ+iuvuWkh0lE6L+Y5pyq5aGr5YaZLOaYr+WQpua3u+WKoD8/JyxcbiAgICAgICAgc3VjY2VzczogKGUpID0+IHtcbiAgICAgICAgICBpZiAoZS5jb25maXJtKSB0aGlzLmFkZER0dXMoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSAqL1xuICAgIHRoaXMuYWRkRHR1cygpXG4gIH0sXG5cbiAgLy8gYWRkXG4gIGFzeW5jIGFkZER0dXMoKSB7XG4gICAgY29uc3QgeyBtYWMsIGJpbmQsIHJhZGlvIH0gPSB0aGlzLmRhdGFcblxuICAgIGlmKG1hYy5sZW5ndGggIT09IDEyKXtcbiAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgIGNvbnRlbnQ6YCR7bWFjfemVv+W6puW8guW4uCzor7fmoLjlr7nmmK/lkKbmraPnoa4/P2BcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZHR1cy5maW5kSW5kZXgoZWwgPT4gZWwuRGV2TWFjID09PSBtYWMpICE9PSAtMSkge1xuICAgICAgY29uc29sZS5sb2coJ+mHjeWkjeaJq+aPjycpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG1hYyxcbiAgICAgIGR0dXM6IFt7IERldk1hYzogbWFjLCBiaW5kRGV2OiBiaW5kLCBtb3VudE5vZGU6IHJhZGlvIH0sIC4uLnRoaXMuZGF0YS5kdHVzXVxuICAgIH0pXG4gICAgY29uc3QgZHR1bGVuID0gdGhpcy5kYXRhLmR0dXMubGVuZ3RoXG4gICAgZm9yIChsZXQgbm9kZSBvZiB0aGlzLmRhdGEubm9kZXMpIHtcbiAgICAgIGlmIChub2RlLk1heENvbm5lY3Rpb25zIC0gKG5vZGUuY291bnQgfHwgMCkgPiBkdHVsZW4pIHtcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICByYWRpbzogbm9kZS5OYW1lXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICB9XG4gIH0sXG5cbiAgLy8g6YCJ5oup6IqC54K5XG4gIG9uQ2hhbmdlX05vZGUoZXZlbnQ6IHZhbnRFdmVudCkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcblxuICB9LFxuXG4gIC8vIOWIoOmZpOmAieaLqeeahERUVVxuICBybUR0dShldmVudDogdmFudEV2ZW50KSB7XG4gICAgY29uc3QgbWFjID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmtleVxuICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICB0aXRsZTogJ+WIoOmZpGR0dScsXG4gICAgICBjb250ZW50OiBg56Gu5a6a5Yig6ZmkZHR1OiR7bWFjfSA/P2AsXG4gICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMuY29uZmlybSkge1xuICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgICBkdHVzOiB0aGlzLmRhdGEuZHR1cy5maWx0ZXIoZWwgPT4gZWwuRGV2TWFjICE9PSBtYWMpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgLy8g6I635Y+W6IqC54K55YiX6KGoXG4gIGFzeW5jIGdldE5vZGVzKCkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXBpLk5vZGVzKClcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgbm9kZXM6IGRhdGEsXG4gICAgICByYWRpbzogZGF0YVswXS5OYW1lXG4gICAgfSlcbiAgfSxcbiAgLy8g5Y+Y5pu06YCJ5oup6IqC54K5XG4gIGNoYW5nZU5vZGUoZXZlbnQ6IHZhbnRFdmVudCkge1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICByYWRpbzogZXZlbnQuZGV0YWlsLFxuICAgIH0pO1xuICB9LFxuXG4gIC8vIOmAieaLqeiKgueCuVxuICBzZWxlY3ROb2RlKGV2ZW50OiB2YW50RXZlbnQpIHtcbiAgICBjb25zdCBpdGVtOiBVYXJ0Lk5vZGVDbGllbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaXRlbVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICByYWRpbzogaXRlbS5OYW1lXG4gICAgfSk7XG4gIH0sXG4gIC8vIOaPkOS6pFxuICBzdWJtaXQoKSB7XG4gICAgY29uc3QgeyBkdHVzLCByYWRpbyB9ID0gdGhpcy5kYXRhXG4gICAgd3guc2hvd01vZGFsKHtcbiAgICAgIHRpdGxlOiAn5o+Q5Lqk5qC45a+5JyxcbiAgICAgIGNvbnRlbnQ6IGDmnKzmrKHmj5DkuqTnmoRkdHXmlbDnm646JHtkdHVzLmxlbmd0aH0s5oyC6L2955qE6IqC54K55Li6OiR7cmFkaW99LGAsXG4gICAgICBzdWNjZXNzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFsbCA9IGF3YWl0IFByb21pc2UuYWxsKGR0dXMubWFwKGVsID0+IGFwaS5hZGRSZWdpc3RlclRlcm1pbmFsKGVsLkRldk1hYywgZWwubW91bnROb2RlKSkpXG4gICAgICAgIGlmIChhbGwubGVuZ3RoID09PSBkdHVzLmxlbmd0aCkge1xuICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICB0aXRsZTogJ+aPkOS6pOaIkOWKnycsXG4gICAgICAgICAgICBjb250ZW50OiBg5oiQ5Yqf5o+Q5LqkWyR7YWxsLmxlbmd0aH1dIOS4quiuvuWkh2BcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuZ2V0Tm9kZXMoKVxuICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgICBkdHVzOiBbXSxcbiAgICAgICAgICAgIG1hYzogJydcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgICAgICB0aXRsZTogJ+aPkOS6pOmUmeivrycsXG4gICAgICAgICAgICBjb250ZW50OiAn5o+Q5Lqk6ZSZ6K+vJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG5cbiAgY29weSgpIHtcbiAgICBjb25zdCBtYWMgPSB0aGlzLmRhdGEuZHR1cy5tYXAoZWwgPT4gJzg2NicgKyBlbC5EZXZNYWMpLmpvaW4oXCJcXG5cIilcbiAgICB3eC5zZXRDbGlwYm9hcmREYXRhKHtcbiAgICAgIGRhdGE6IG1hYyxcbiAgICAgIHN1Y2Nlc3MoKSB7XG4gICAgICAgIHd4LnNob3dUb2FzdCh7XG4gICAgICAgICAgdGl0bGU6ICdzdWNjZXNzJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn0pIl19