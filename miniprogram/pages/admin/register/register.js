"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const api_1 = require("../../../utils/api");
Page({
    data: {
        mac: '',
        bind: '',
        dtus: [],
        nodes: [],
        radio: ''
    },
    onLoad: function () {
        this.getNodes();
    },
    async scanMac() {
        const scanResult = await wx.scanCode({});
        this.setData({
            mac: scanResult.result
        });
        this.addDtus();
    },
    scanRequst() {
        this.addDtus();
    },
    async addDtus() {
        const { mac, bind, radio } = this.data;
        if (mac.length !== 12) {
            wx.showModal({
                content: `${mac}长度异常,请核对是否正确??`
            });
        }
        if (this.data.dtus.findIndex(el => el.DevMac === mac) !== -1) {
            console.log('重复扫描');
            return;
        }
        this.setData({
            mac,
            dtus: [{ DevMac: mac, bindDev: bind, mountNode: radio }, ...this.data.dtus]
        });
        const dtulen = this.data.dtus.length;
        for (let node of this.data.nodes) {
            if (node.MaxConnections - (node.count || 0) > dtulen) {
                this.setData({
                    radio: node.Name
                });
                break;
            }
        }
    },
    onChange_Node(event) {
        console.log(event);
    },
    rmDtu(event) {
        const mac = event.currentTarget.dataset.key;
        wx.showModal({
            title: '删除dtu',
            content: `确定删除dtu:${mac} ??`,
            success: (res) => {
                if (res.confirm) {
                    this.setData({
                        dtus: this.data.dtus.filter(el => el.DevMac !== mac)
                    });
                }
            }
        });
    },
    async getNodes() {
        const { data } = await api_1.default.Nodes();
        this.setData({
            nodes: data,
            radio: data[0].Name
        });
    },
    changeNode(event) {
        this.setData({
            radio: event.detail,
        });
    },
    selectNode(event) {
        const item = event.currentTarget.dataset.item;
        this.setData({
            radio: item.Name
        });
    },
    submit() {
        const { dtus, radio } = this.data;
        wx.showModal({
            title: '提交核对',
            content: `本次提交的dtu数目:${dtus.length},挂载的节点为:${radio},`,
            success: async () => {
                const all = await Promise.all(dtus.map(el => api_1.default.addRegisterTerminal(el.DevMac, el.mountNode)));
                if (all.length === dtus.length) {
                    wx.showModal({
                        title: '提交成功',
                        content: `成功提交[${all.length}] 个设备`
                    });
                    this.getNodes();
                    this.setData({
                        dtus: [],
                        mac: ''
                    });
                }
                else {
                    wx.showModal({
                        title: '提交错误',
                        content: '提交错误'
                    });
                }
            }
        });
    },
    copy() {
        const mac = this.data.dtus.map(el => '866' + el.DevMac).join("\n");
        wx.setClipboardData({
            data: mac,
            success() {
                wx.showToast({
                    title: 'success'
                });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZWdpc3Rlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDRDQUFxQztBQUdyQyxJQUFJLENBQUM7SUFLSCxJQUFJLEVBQUU7UUFDSixHQUFHLEVBQUUsRUFBRTtRQUNQLElBQUksRUFBRSxFQUFFO1FBQ1IsSUFBSSxFQUFFLEVBQTZCO1FBQ25DLEtBQUssRUFBRSxFQUF1QjtRQUM5QixLQUFLLEVBQUUsRUFBRTtLQUNWO0lBS0QsTUFBTSxFQUFFO1FBQ04sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO0lBQ2pCLENBQUM7SUFHRCxLQUFLLENBQUMsT0FBTztRQUNYLE1BQU0sVUFBVSxHQUFHLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUV4QyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsR0FBRyxFQUFFLFVBQVUsQ0FBQyxNQUFNO1NBQ3ZCLENBQUMsQ0FBQTtRQUNGLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQixDQUFDO0lBV0QsVUFBVTtRQVVSLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQixDQUFDO0lBR0QsS0FBSyxDQUFDLE9BQU87UUFDWCxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFBO1FBRXRDLElBQUcsR0FBRyxDQUFDLE1BQU0sS0FBSyxFQUFFLEVBQUM7WUFDbkIsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWCxPQUFPLEVBQUMsR0FBRyxHQUFHLGdCQUFnQjthQUMvQixDQUFDLENBQUE7U0FDSDtRQUNELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sS0FBSyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUM1RCxPQUFPLENBQUMs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QUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUMvRixJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLE1BQU0sRUFBRTtvQkFDOUIsRUFBRSxDQUFDLFNBQVMsQ0FBQzt3QkFDWCxLQUFLLEVBQUUsTUFBTTt3QkFDYixPQUFPLEVBQUUsUUFBUSxHQUFHLENBQUMsTUFBTSxPQUFPO3FCQUNuQyxDQUFDLENBQUE7b0JBQ0YsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO29CQUNmLElBQUksQ0FBQyxPQUFPLENBQUM7d0JBQ1gsSUFBSSxFQUFFLEVBQUU7d0JBQ1IsR0FBRyxFQUFFLEVBQUU7cUJBQ1IsQ0FBQyxDQUFBO2lCQUNIO3FCQUFNO29CQUNMLEVBQUUsQ0FBQyxTQUFTLENBQUM7d0JBQ1gsS0FBSyxFQUFFLE1BQU07d0JBQ2IsT0FBTyxFQUFFLE1BQU07cUJBQ2hCLENBQUMsQ0FBQTtpQkFDSDtZQUNILENBQUM7U0FDRixDQUFDLENBQUE7SUFDSixDQUFDO0lBR0QsSUFBSTtRQUNGLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ2xFLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztZQUNsQixJQUFJLEVBQUUsR0FBRztZQUNULE9BQU87Z0JBQ0wsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDWCxLQUFLLEVBQUUsU0FBUztpQkFDakIsQ0FBQyxDQUFBO1lBQ0osQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBpIGZyb20gXCIuLi8uLi8uLi91dGlscy9hcGlcIjtcblxuLy8gbWluaXByb2dyYW0vcGFnZXMvYWRtaW4vcmVnaXN0ZXIvcmVnaXN0ZXIuanNcblBhZ2Uoe1xuXG4gIC8qKlxuICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cbiAgICovXG4gIGRhdGE6IHtcbiAgICBtYWM6ICcnLFxuICAgIGJpbmQ6ICcnLFxuICAgIGR0dXM6IFtdIGFzIFVhcnQuUmVnaXN0ZXJUZXJtaW5hbFtdLFxuICAgIG5vZGVzOiBbXSBhcyBVYXJ0Lk5vZGVDbGllbnRbXSxcbiAgICByYWRpbzogJydcbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliqDovb1cbiAgICovXG4gIG9uTG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2V0Tm9kZXMoKVxuICB9LFxuXG4gIC8vIOiwg+eUqOW+ruS/oWFwae+8jOaJq+aPj0RUVeadoeW9oueggVxuICBhc3luYyBzY2FuTWFjKCkge1xuICAgIGNvbnN0IHNjYW5SZXN1bHQgPSBhd2FpdCB3eC5zY2FuQ29kZSh7fSlcbiAgICAvL2NvbnN0IHsgY29kZSwgZGF0YSB9ID0gYXdhaXQgYXBpLmdldFRlcm1pbmFsKHNjYW5SZXN1bHQucmVzdWx0KVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBtYWM6IHNjYW5SZXN1bHQucmVzdWx0XG4gICAgfSlcbiAgICB0aGlzLmFkZER0dXMoKVxuICB9LFxuXG4gIC8qIGFzeW5jIHNjYW5CaW5kKCkge1xuICAgIGNvbnN0IHNjYW5SZXN1bHQgPSBhd2FpdCB3eC5zY2FuQ29kZSh7fSlcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYmluZDogc2NhblJlc3VsdC5yZXN1bHRcbiAgICB9KVxuICAgIGlmICh0aGlzLmRhdGEubWFjICYmIHRoaXMuZGF0YS5iaW5kKSB0aGlzLmFkZER0dXMoKVxuICB9LCAqL1xuXG4gIC8vIOWKoOWFpWR0dXNcbiAgc2NhblJlcXVzdCgpIHtcbiAgICAvKiBpZiAoIXRoaXMuZGF0YS5iaW5kKSB7XG4gICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICB0aXRsZTogJ+WPguaVsOS4jeWujOaVtCcsXG4gICAgICAgIGNvbnRlbnQ6ICforr7lpIdJROi/mOacquWhq+WGmSzmmK/lkKbmt7vliqA/PycsXG4gICAgICAgIHN1Y2Nlc3M6IChlKSA9PiB7XG4gICAgICAgICAgaWYgKGUuY29uZmlybSkgdGhpcy5hZGREdHVzKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgKi9cbiAgICB0aGlzLmFkZER0dXMoKVxuICB9LFxuXG4gIC8vIGFkZFxuICBhc3luYyBhZGREdHVzKCkge1xuICAgIGNvbnN0IHsgbWFjLCBiaW5kLCByYWRpbyB9ID0gdGhpcy5kYXRhXG5cbiAgICBpZihtYWMubGVuZ3RoICE9PSAxMil7XG4gICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICBjb250ZW50OmAke21hY33plb/luqblvILluLgs6K+35qC45a+55piv5ZCm5q2j56GuPz9gXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmR0dXMuZmluZEluZGV4KGVsID0+IGVsLkRldk1hYyA9PT0gbWFjKSAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfph43lpI3miavmj48nKTtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBtYWMsXG4gICAgICBkdHVzOiBbeyBEZXZNYWM6IG1hYywgYmluZERldjogYmluZCwgbW91bnROb2RlOiByYWRpbyB9LCAuLi50aGlzLmRhdGEuZHR1c11cbiAgICB9KVxuICAgIGNvbnN0IGR0dWxlbiA9IHRoaXMuZGF0YS5kdHVzLmxlbmd0aFxuICAgIGZvciAobGV0IG5vZGUgb2YgdGhpcy5kYXRhLm5vZGVzKSB7XG4gICAgICBpZiAobm9kZS5NYXhDb25uZWN0aW9ucyAtIChub2RlLmNvdW50IHx8IDApID4gZHR1bGVuKSB7XG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgcmFkaW86IG5vZGUuTmFtZVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgfVxuICB9LFxuXG4gIC8vIOmAieaLqeiKgueCuVxuICBvbkNoYW5nZV9Ob2RlKGV2ZW50OiB2YW50RXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZyhldmVudCk7XG5cbiAgfSxcblxuICAvLyDliKDpmaTpgInmi6nnmoREVFVcbiAgcm1EdHUoZXZlbnQ6IHZhbnRFdmVudCkge1xuICAgIGNvbnN0IG1hYyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXlcbiAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgdGl0bGU6ICfliKDpmaRkdHUnLFxuICAgICAgY29udGVudDogYOehruWumuWIoOmZpGR0dToke21hY30gPz9gLFxuICAgICAgc3VjY2VzczogKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLmNvbmZpcm0pIHtcbiAgICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgZHR1czogdGhpcy5kYXRhLmR0dXMuZmlsdGVyKGVsID0+IGVsLkRldk1hYyAhPT0gbWFjKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIC8vIOiOt+WPluiKgueCueWIl+ihqFxuICBhc3luYyBnZXROb2RlcygpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5Ob2RlcygpXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIG5vZGVzOiBkYXRhLFxuICAgICAgcmFkaW86IGRhdGFbMF0uTmFtZVxuICAgIH0pXG4gIH0sXG4gIC8vIOWPmOabtOmAieaLqeiKgueCuVxuICBjaGFuZ2VOb2RlKGV2ZW50OiB2YW50RXZlbnQpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgcmFkaW86IGV2ZW50LmRldGFpbCxcbiAgICB9KTtcbiAgfSxcblxuICAvLyDpgInmi6noioLngrlcbiAgc2VsZWN0Tm9kZShldmVudDogdmFudEV2ZW50KSB7XG4gICAgY29uc3QgaXRlbTogVWFydC5Ob2RlQ2xpZW50ID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1cbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgcmFkaW86IGl0ZW0uTmFtZVxuICAgIH0pO1xuICB9LFxuICAvLyDmj5DkuqRcbiAgc3VibWl0KCkge1xuICAgIGNvbnN0IHsgZHR1cywgcmFkaW8gfSA9IHRoaXMuZGF0YVxuICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICB0aXRsZTogJ+aPkOS6pOaguOWvuScsXG4gICAgICBjb250ZW50OiBg5pys5qyh5o+Q5Lqk55qEZHR15pWw55uuOiR7ZHR1cy5sZW5ndGh9LOaMgui9veeahOiKgueCueS4ujoke3JhZGlvfSxgLFxuICAgICAgc3VjY2VzczogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhbGwgPSBhd2FpdCBQcm9taXNlLmFsbChkdHVzLm1hcChlbCA9PiBhcGkuYWRkUmVnaXN0ZXJUZXJtaW5hbChlbC5EZXZNYWMsIGVsLm1vdW50Tm9kZSkpKVxuICAgICAgICBpZiAoYWxsLmxlbmd0aCA9PT0gZHR1cy5sZW5ndGgpIHtcbiAgICAgICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgdGl0bGU6ICfmj5DkuqTmiJDlip8nLFxuICAgICAgICAgICAgY29udGVudDogYOaIkOWKn+aPkOS6pFske2FsbC5sZW5ndGh9XSDkuKrorr7lpIdgXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0aGlzLmdldE5vZGVzKClcbiAgICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgZHR1czogW10sXG4gICAgICAgICAgICBtYWM6ICcnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgdGl0bGU6ICfmj5DkuqTplJnor68nLFxuICAgICAgICAgICAgY29udGVudDogJ+aPkOS6pOmUmeivrydcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuXG4gIGNvcHkoKSB7XG4gICAgY29uc3QgbWFjID0gdGhpcy5kYXRhLmR0dXMubWFwKGVsID0+ICc4NjYnICsgZWwuRGV2TWFjKS5qb2luKFwiXFxuXCIpXG4gICAgd3guc2V0Q2xpcGJvYXJkRGF0YSh7XG4gICAgICBkYXRhOiBtYWMsXG4gICAgICBzdWNjZXNzKCkge1xuICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiAnc3VjY2VzcydcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KSJdfQ==