"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const api_1 = require("../../../utils/api");
Page({
    data: {
        id: '',
        ids: [],
        devType: 'UPS',
        devTypes: [{ text: 'UPS', value: 'UPS' }, { text: '空调', value: '空调' }, { text: '电量仪', value: '电量仪' }, { text: '温湿度', value: '温湿度' }],
        devModal: '',
        devModals: [],
        devModesMap: new Map(),
        devProtocol: '',
        devProtocols: [],
        pid: 1
    },
    onLoad: function () {
        this.devTypeChange();
    },
    async devTypeChange() {
        const { data } = await api_1.default.getDevTypes(this.data.devType);
        const devModals = data.map(el => ({ text: el.DevModel, value: el.DevModel }));
        this.setData({
            devModals,
            devProtocols: [],
            devModesMap: new Map(data.map(el => [el.DevModel, el]))
        });
    },
    async devModalChange() {
        const { devModesMap, devModal } = this.data;
        const devProtocols = devModesMap.get(devModal)?.Protocols.map(el => ({ text: el.Protocol, value: el.Protocol }));
        this.setData({
            devProtocols
        });
    },
    async scanMac() {
        const scanResult = await wx.scanCode({});
        this.setData({
            id: scanResult.result
        });
        this.scanRequst();
    },
    async scanRequst() {
        wx.showLoading({ title: '查询中' });
        const r = await api_1.default.getRegisterDev(this.data.id);
        wx.hideLoading();
        if (r.code && r.data) {
            wx.showModal({
                title: '重复注册',
                content: `设备${r.data.id}/${r.data.mountDev}已被注册`
            });
        }
        else
            this.setData({
                ids: [...new Set([...this.data.ids, this.data.id])]
            });
    },
    rmid(event) {
        const mac = event.currentTarget.dataset.key;
        wx.showModal({
            title: '删除Id',
            content: `确定删除Id:${mac} ??`,
            success: (res) => {
                if (res.confirm) {
                    this.setData({
                        ids: this.data.ids.filter(el => el !== mac)
                    });
                }
            }
        });
    },
    async submit() {
        const { ids, pid, devModal, devProtocol, devType } = this.data;
        if (ids.length === 0 || !pid || !devProtocol || !devModal || !devType) {
            wx.showModal({
                title: '校验错误',
                content: "缺少参数"
            });
            return;
        }
        const mountDev = {
            Type: devType,
            mountDev: devModal,
            pid,
            protocol: devProtocol
        };
        const res = await wx.showModal({
            title: '登记设备',
            content: `确认参数[${mountDev.mountDev}]/[${mountDev.protocol}]/[${mountDev.pid}] !!!`
        });
        if (res.confirm) {
            wx.showLoading({ title: '正在登记' });
            const r = await api_1.default.addRegisterDev(ids, mountDev);
            wx.hideLoading();
            if (r.code) {
                wx.showModal({
                    title: 'success',
                    content: `成功注册设备${r.data.length}个`
                });
                this.setData({
                    id: '',
                    ids: []
                });
            }
        }
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function () {
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXJEZXYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZWdpc3RlckRldi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDRDQUFvQztBQVNwQyxJQUFJLENBQUM7SUFLSCxJQUFJLEVBQUU7UUFDSixFQUFFLEVBQUUsRUFBRTtRQUNOLEdBQUcsRUFBRSxFQUFjO1FBQ25CLE9BQU8sRUFBRSxLQUFLO1FBQ2QsUUFBUSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBZ0I7UUFDbkosUUFBUSxFQUFFLEVBQUU7UUFDWixTQUFTLEVBQUUsRUFBaUI7UUFDNUIsV0FBVyxFQUFFLElBQUksR0FBRyxFQUFnQztRQUNwRCxXQUFXLEVBQUUsRUFBRTtRQUNmLFlBQVksRUFBRSxFQUFpQjtRQUMvQixHQUFHLEVBQUUsQ0FBQztLQUNQO0lBS0QsTUFBTSxFQUFFO1FBQ04sSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO0lBQ3RCLENBQUM7SUFHRCxLQUFLLENBQUMsYUFBYTtRQUNqQixNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxhQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDekQsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUM3RSxJQUFJLENB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RUFBRTtJQUVULENBQUM7SUFLRCxNQUFNLEVBQUU7SUFFUixDQUFDO0lBS0QsTUFBTSxFQUFFO0lBRVIsQ0FBQztJQUtELFFBQVEsRUFBRTtJQUVWLENBQUM7SUFLRCxpQkFBaUIsRUFBRTtJQUVuQixDQUFDO0lBS0QsYUFBYSxFQUFFO0lBRWYsQ0FBQztJQUtELGlCQUFpQixFQUFFO0lBRW5CLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXBpIGZyb20gXCIuLi8uLi8uLi91dGlscy9hcGlcIlxuXG4vLyBtaW5pcHJvZ3JhbS9wYWdlcy9hZG1pbi9yZWdpc3RlckRldi9yZWdpc3RlckRldi5qc1xuaW50ZXJmYWNlIGRldk1vZGFscyB7XG4gIHRleHQ6IHN0cmluZyxcbiAgdmFsdWU6IHN0cmluZ1xufVxuXG5cblBhZ2Uoe1xuXG4gIC8qKlxuICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cbiAgICovXG4gIGRhdGE6IHtcbiAgICBpZDogJycsXG4gICAgaWRzOiBbXSBhcyBzdHJpbmdbXSxcbiAgICBkZXZUeXBlOiAnVVBTJyxcbiAgICBkZXZUeXBlczogW3sgdGV4dDogJ1VQUycsIHZhbHVlOiAnVVBTJyB9LCB7IHRleHQ6ICfnqbrosIMnLCB2YWx1ZTogJ+epuuiwgycgfSwgeyB0ZXh0OiAn55S16YeP5LuqJywgdmFsdWU6ICfnlLXph4/ku6onIH0sIHsgdGV4dDogJ+a4qea5v+W6picsIHZhbHVlOiAn5rip5rm/5bqmJyB9XSBhcyBkZXZNb2RhbHNbXSxcbiAgICBkZXZNb2RhbDogJycsXG4gICAgZGV2TW9kYWxzOiBbXSBhcyBkZXZNb2RhbHNbXSxcbiAgICBkZXZNb2Rlc01hcDogbmV3IE1hcCgpIGFzIE1hcDxzdHJpbmcsIFVhcnQuRGV2c1R5cGU+LFxuICAgIGRldlByb3RvY29sOiAnJyxcbiAgICBkZXZQcm90b2NvbHM6IFtdIGFzIGRldk1vZGFsc1tdLFxuICAgIHBpZDogMVxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWKoOi9vVxuICAgKi9cbiAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kZXZUeXBlQ2hhbmdlKClcbiAgfSxcblxuICAvLyDnm5HlkKzorr7lpIfnsbvlnovlj5jljJZcbiAgYXN5bmMgZGV2VHlwZUNoYW5nZSgpIHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGFwaS5nZXREZXZUeXBlcyh0aGlzLmRhdGEuZGV2VHlwZSlcbiAgICBjb25zdCBkZXZNb2RhbHMgPSBkYXRhLm1hcChlbCA9PiAoeyB0ZXh0OiBlbC5EZXZNb2RlbCwgdmFsdWU6IGVsLkRldk1vZGVsIH0pKVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBkZXZNb2RhbHMsXG4gICAgICBkZXZQcm90b2NvbHM6IFtdLFxuICAgICAgZGV2TW9kZXNNYXA6IG5ldyBNYXAoZGF0YS5tYXAoZWwgPT4gW2VsLkRldk1vZGVsLCBlbF0pKVxuICAgIH0pXG4gIH0sXG5cbiAgLy8g55uR5ZCs6K6+5aSH5Z6L5Y+35Y+Y5YyWXG4gIGFzeW5jIGRldk1vZGFsQ2hhbmdlKCkge1xuICAgIGNvbnN0IHsgZGV2TW9kZXNNYXAsIGRldk1vZGFsIH0gPSB0aGlzLmRhdGFcbiAgICBjb25zdCBkZXZQcm90b2NvbHMgPSBkZXZNb2Rlc01hcC5nZXQoZGV2TW9kYWwpPy5Qcm90b2NvbHMubWFwKGVsID0+ICh7IHRleHQ6IGVsLlByb3RvY29sLCB2YWx1ZTogZWwuUHJvdG9jb2wgfSkpIVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBkZXZQcm90b2NvbHNcbiAgICB9KVxuICB9LFxuXG4gIC8vIOiwg+eUqOW+ruS/oWFwae+8jOaJq+aPj0RUVeadoeW9oueggVxuICBhc3luYyBzY2FuTWFjKCkge1xuICAgIGNvbnN0IHNjYW5SZXN1bHQgPSBhd2FpdCB3eC5zY2FuQ29kZSh7fSlcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgaWQ6IHNjYW5SZXN1bHQucmVzdWx0XG4gICAgfSlcbiAgICB0aGlzLnNjYW5SZXF1c3QoKVxuICB9LFxuXG4gIGFzeW5jIHNjYW5SZXF1c3QoKSB7XG4gICAgd3guc2hvd0xvYWRpbmcoeyB0aXRsZTogJ+afpeivouS4rScgfSlcbiAgICBjb25zdCByID0gYXdhaXQgYXBpLmdldFJlZ2lzdGVyRGV2KHRoaXMuZGF0YS5pZClcbiAgICB3eC5oaWRlTG9hZGluZygpXG4gICAgaWYgKHIuY29kZSAmJiByLmRhdGEpIHtcbiAgICAgIHd4LnNob3dNb2RhbCh7XG4gICAgICAgIHRpdGxlOiAn6YeN5aSN5rOo5YaMJyxcbiAgICAgICAgY29udGVudDogYOiuvuWkhyR7ci5kYXRhLmlkfS8ke3IuZGF0YS5tb3VudERldn3lt7Looqvms6jlhoxgXG4gICAgICB9KVxuICAgIH0gZWxzZVxuICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgaWRzOiBbLi4ubmV3IFNldChbLi4udGhpcy5kYXRhLmlkcywgdGhpcy5kYXRhLmlkXSldXG4gICAgICB9KVxuICB9LFxuXG5cbiAgLy8g5Yig6Zmk6YCJ5oup55qERFRVXG4gIHJtaWQoZXZlbnQ6IHZhbnRFdmVudCkge1xuICAgIGNvbnN0IG1hYyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5rZXlcbiAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgdGl0bGU6ICfliKDpmaRJZCcsXG4gICAgICBjb250ZW50OiBg56Gu5a6a5Yig6ZmkSWQ6JHttYWN9ID8/YCxcbiAgICAgIHN1Y2Nlc3M6IChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5jb25maXJtKSB7XG4gICAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIGlkczogdGhpcy5kYXRhLmlkcy5maWx0ZXIoZWwgPT4gZWwgIT09IG1hYylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgLy8g5o+Q5LqkXG4gIGFzeW5jIHN1Ym1pdCgpIHtcbiAgICBjb25zdCB7IGlkcywgcGlkLCBkZXZNb2RhbCwgZGV2UHJvdG9jb2wsIGRldlR5cGUgfSA9IHRoaXMuZGF0YVxuICAgIGlmIChpZHMubGVuZ3RoID09PSAwIHx8ICFwaWQgfHwgIWRldlByb3RvY29sIHx8ICFkZXZNb2RhbCB8fCAhZGV2VHlwZSkge1xuICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgdGl0bGU6ICfmoKHpqozplJnor68nLFxuICAgICAgICBjb250ZW50OiBcIue8uuWwkeWPguaVsFwiXG4gICAgICB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1vdW50RGV2OiBVYXJ0LlRlcm1pbmFsTW91bnREZXZzID0ge1xuICAgICAgVHlwZTogZGV2VHlwZSxcbiAgICAgIG1vdW50RGV2OiBkZXZNb2RhbCxcbiAgICAgIHBpZCxcbiAgICAgIHByb3RvY29sOiBkZXZQcm90b2NvbFxuICAgIH1cblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHd4LnNob3dNb2RhbCh7XG4gICAgICB0aXRsZTogJ+eZu+iusOiuvuWkhycsXG4gICAgICBjb250ZW50OiBg56Gu6K6k5Y+C5pWwWyR7bW91bnREZXYubW91bnREZXZ9XS9bJHttb3VudERldi5wcm90b2NvbH1dL1ske21vdW50RGV2LnBpZH1dICEhIWBcbiAgICB9KVxuICAgIGlmIChyZXMuY29uZmlybSkge1xuICAgICAgd3guc2hvd0xvYWRpbmcoeyB0aXRsZTogJ+ato+WcqOeZu+iusCcgfSlcbiAgICAgIGNvbnN0IHIgPSBhd2FpdCBhcGkuYWRkUmVnaXN0ZXJEZXYoaWRzLCBtb3VudERldilcbiAgICAgIHd4LmhpZGVMb2FkaW5nKClcbiAgICAgIGlmIChyLmNvZGUpIHtcbiAgICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgICB0aXRsZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIGNvbnRlbnQ6IGDmiJDlip/ms6jlhozorr7lpIcke3IuZGF0YS5sZW5ndGh95LiqYFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgIGlkOiAnJyxcbiAgICAgICAgICBpZHM6IFtdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yid5qyh5riy5p+T5a6M5oiQXG4gICAqL1xuICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLmmL7npLpcbiAgICovXG4gIG9uU2hvdzogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i6ZqQ6JePXG4gICAqL1xuICBvbkhpZGU6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWNuOi9vVxuICAgKi9cbiAgb25VbmxvYWQ6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDpobXpnaLnm7jlhbPkuovku7blpITnkIblh73mlbAtLeebkeWQrOeUqOaIt+S4i+aLieWKqOS9nFxuICAgKi9cbiAgb25QdWxsRG93blJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDpobXpnaLkuIrmi4nop6blupXkuovku7bnmoTlpITnkIblh73mlbBcbiAgICovXG4gIG9uUmVhY2hCb3R0b206IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlKjmiLfngrnlh7vlj7PkuIrop5LliIbkuqtcbiAgICovXG4gIG9uU2hhcmVBcHBNZXNzYWdlOiBmdW5jdGlvbiAoKSB7XG5cbiAgfVxufSkiXX0=