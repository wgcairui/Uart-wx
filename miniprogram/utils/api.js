"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("../config");
class api {
    constructor() {
        this.token = "";
    }
    setToken(token) {
        this.token = token;
        wx.setBackgroundFetchToken({
            token
        });
    }
    async login(data) {
        const el = await this.fetch("auth/code2Session", data, "GET");
        if (el.code) {
            this.setToken(el.data.token);
        }
        return el;
    }
    async userlogin(data) {
        const el = await this.fetch('auth/wplogin', data);
        if (el.code) {
            this.setToken(el.data.token);
        }
        return el;
    }
    updateAvanter(nickName, avanter) {
        return this.fetch('updateAvanter', { nickName, avanter });
    }
    async unbindwx() {
        const el = await this.fetch('unbindwx');
        this.token = "";
        return el;
    }
    getphonenumber(data) {
        return this.fetch("auth/getphonenumber", data);
    }
    registerUser(data) {
        return this.fetch("auth/wxRegister", data);
    }
    bindDev(mac) {
        return this.fetch('bindDev', { mac });
    }
    getAlarmunconfirmed() {
        return this.fetch('getAlarmunconfirmed');
    }
    getGPSaddress(location) {
        return this.fetch('getGPSaddress', { location });
    }
    async cancelwx() {
        const el = await this.fetch('cancelwx');
        this.token = "";
        return el;
    }
    addVm() {
        return this.fetch('addVm');
    }
    modifyDTUName(dtu, name) {
        return this.fetch('modifyDTUName', { dtu, name });
    }
    updateGps(mac, jw) {
        return this.fetch('updateGps', { mac, jw });
    }
    webLogin(code) {
        return this.fetch('webLogin', { code, token: this.token });
    }
    addUser(name, user, passwd, tel, mail, company) {
        return this.fetch("guest/addUser", { name, user, passwd, tel, mail, company });
    }
    resetPasswdValidation(user) {
        return this.fetch("guest/resetPasswdValidation", { user });
    }
    resetUserPasswd(user, passwd, code) {
        return this.fetch("guest/resetUserPasswd", { user, passwd, code });
    }
    wxlogin(code, state) {
        return this.fetch("auth/wxlogin", { code, state });
    }
    crc(data) {
        return this.fetch("open//crc", { data });
    }
    BindDev() {
        return this.fetch("BindDev");
    }
    userInfo() {
        return this.fetch("userInfo");
    }
    getAlarm(start = new Date().toLocaleDateString().replace(/\//g, "-") + " 0:00:00", end = new Date().toLocaleDateString().replace(/\//g, "-") + " 23:59:59") {
        return this.fetch("loguartterminaldatatransfinites", { start, end });
    }
    confrimAlarm(id) {
        return this.fetch("confrimAlarm", { id });
    }
    getTerminalOnline(mac) {
        return this.fetch("getTerminalOnline", { mac });
    }
    modifyTerminal(mac, name) {
        return this.fetch('modifyTerminal', { mac, name });
    }
    addUserTerminal(mac) {
        return this.fetch("addUserTerminal", { mac });
    }
    delUserTerminal(mac) {
        return this.fetch("delUserTerminal", { mac });
    }
    getDevTypes(Type) {
        return this.fetch("getDevTypes", { Type });
    }
    delTerminalMountDev(mac, pid) {
        return this.fetch("delTerminalMountDev", { mac, pid });
    }
    addTerminalMountDev(mac, mountDev) {
        return this.fetch("addTerminalMountDev", { mac, mountDev });
    }
    getUserAlarmSetup() {
        return this.fetch("getUserAlarmSetup");
    }
    modifyUserAlarmSetupTel(tels, mails) {
        return this.fetch("modifyUserAlarmSetupTel", { tels, mails });
    }
    modifyUserInfo(data) {
        return this.fetch("modifyUserInfo", { data });
    }
    mpTicket() {
        return this.fetch("mpTicket");
    }
    wpTicket() {
        return this.fetch("wpTicket");
    }
    getUserAlarmProtocol(protocol) {
        return this.fetch("getUserAlarmProtocol", { protocol });
    }
    getAlarmProtocol(protocol) {
        return this.fetch("getAlarmProtocol", { protocol });
    }
    getTerminalData(mac, pid) {
        return this.fetch("getTerminalData", { mac, pid });
    }
    getTerminalDatas(mac, pid, name, datetime) {
        return this.fetch("getTerminalDatas", { mac, pid, name, datetime });
    }
    refreshDevTimeOut(mac, pid) {
        return this.fetch("refreshDevTimeOut", { mac, pid });
    }
    SendProcotolInstructSet(query, item) {
        return this.fetch("SendProcotolInstructSet", { query, item });
    }
    getProtocol(protocol) {
        return this.fetch("getProtocol", { protocol });
    }
    setUserSetupProtocol(protocol, type, arg) {
        return this.fetch("setUserSetupProtocol", { protocol, type, arg });
    }
    setAlias(mac, pid, protocol, name, alias) {
        return this.fetch("setAlias", { mac, pid, protocol, name, alias });
    }
    getTerminal(mac) {
        return this.fetch("getTerminal", { mac });
    }
    getUserLayout(id) {
        return this.fetch("getUserLayout", { id });
    }
    getAggregation(id) {
        return this.fetch("getAggregation", { id });
    }
    addAggregation(name, aggs) {
        return this.fetch("addAggregation", { name, aggs });
    }
    deleteAggregation(id) {
        return this.fetch("deleteAggregation", { id });
    }
    setUserLayout(id, type, bg, Layout) {
        return this.fetch("setUserLayout", { id, type, bg, Layout });
    }
    V2_API_Aamp_gps2autoanvi(locations, coordsys = "gps") {
        return this.fetch('util/AMap/GPS2autonavi', { coordsys, locations: Array.isArray(locations) ? locations.join("|") : locations });
    }
    V2_API_Aamp_ip2local(ip) {
        return this.fetch("util/AMap/IP2loction", { ip });
    }
    iotRemoteUrl(mac) {
        return this.fetch('root/iotRemoteUrl', { mac });
    }
    Nodes() {
        return this.fetch("root/Nodes");
    }
    addRegisterTerminal(DevMac, mountNode) {
        return this.fetch("root/addRegisterTerminal", { DevMac, mountNode });
    }
    getRootTerminal(mac) {
        return this.fetch("getTerminal", { mac });
    }
    addRegisterDev(ids, mountDev) {
        return this.fetch("root/addRegisterDev", { ids, mountDev });
    }
    getRegisterDev(id) {
        return this.fetch("getRegisterDev", { id });
    }
    delRegisterDev(id) {
        return this.fetch("root/delRegisterDev", { id });
    }
    getRegisterDevs() {
        return this.fetch("root/getRegisterDevs");
    }
    sendATInstruct(mac, content) {
        return this.fetch("root/sendATInstruct", { mac, content });
    }
    initTerminal(mac) {
        return this.fetch("root/initTerminal", { mac });
    }
    qr(code) {
        return this.fetch("qr", { code });
    }
    async fetch(url, data = {}, method = "POST") {
        const token = this.token || await wx.getStorage({ key: 'token' }).then(el => el.data).catch(() => "");
        return await new Promise((resolve, reject) => {
            wx.request({
                timeout: 1000 * 60,
                url: config_1.urlRequest + "/api/" + url,
                data,
                method,
                enableHttp2: true,
                header: { token, type: 'wp' },
                success: res => {
                    if (res.data.code === 201) {
                        wx.navigateTo({
                            url: '/pages/util/smsValidation/smsValidation',
                            events: {
                                code: (code) => {
                                    this.fetch('smsCodeValidation', { code }).then(codeValidation => {
                                        if (codeValidation.code) {
                                            this.fetch(url, data, method).then(res => {
                                                resolve(res.data);
                                            });
                                        }
                                        else {
                                            wx.showModal({
                                                title: 'error',
                                                content: '短信校验错误'
                                            });
                                            throw new Error();
                                        }
                                    });
                                }
                            }
                        });
                    }
                    else
                        resolve(res.data);
                },
                fail: e => {
                    console.log({ e });
                    wx.showToast({ title: '服务器错误', content: e.errMsg });
                    wx.hideLoading();
                    reject(e);
                }
            });
        });
    }
}
exports.default = new api();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQXNDO0FBd0J0QyxNQUFNLEdBQUc7SUFHUDtRQUNFLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFBO0lBQ2pCLENBQUM7SUFFRCxRQUFRLENBQUMsS0FBYTtRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtRQUNsQixFQUFFLENBQUMsdUJBQXVCLENBQUM7WUFDekIsS0FBSztTQUNOLENBQUMsQ0FBQTtJQW9CSixDQUFDO0lBTUQsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUF5QztRQUNuRCxNQUFNLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQW9CLG1CQUFtQixFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNoRixJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUU7WUFDWCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDN0I7UUFDRCxPQUFPLEVBQUUsQ0FBQTtJQUNYLENBQUM7SUFNRCxLQUFLLENBQUMsU0FBUyxDQUFDLElBQXdGO1FBQ3RHLE1BQU0sRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBb0IsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3BFLElBQUksRUFBRSxDQUFDLElBQUksRUFBRTtZQUNYLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtTQUM3QjtRQUNELE9BQU8sRUFBRSxDQUFBO0lBQ1gsQ0FBQztJQU9ELGFBQWEsQ0FBQyxRQUFnQixFQUFFLE9BQWU7UUFDN0MsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFLRCxLQUFLLENBQUMsUUFBUTtRQUNaLE1BQU0sRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN2QyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQTtRQUNmLE9BQU8sRUFBRSxDQUFBO0lBQ1gsQ0FBQztJQU1ELGNBQWMsQ0FBQyxJQUEyRDtRQUN4RSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQTBCLHFCQUFxQixFQUFFLElBQUksQ0FBQyxDQUFBO0lBQ3pFLENBQUM7SUFNRCxZQUFZLENBQUMsSUFBa0Y7UUFDN0YsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzVDLENBQUM7SUFNRCxPQUFPLENBQUMsR0FBVztRQUNqQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQU0sU0FBUyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUM1QyxDQUFDO0lBS0QsbUJBQW1CO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBUyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ2xELENBQUM7SUFNRCxhQUFhLENBQUMsUUFBZ0I7UUFDNUIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFNLGVBQWUsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUE7SUFDdkQsQ0FBQztJQUtELEtBQUssQ0FBQyxRQUFRO1FBQ1osTUFBTSxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFTLFVBQVUsQ0FBQyxDQUFBO1FBQy9DLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFBO1FBQ2YsT0FBTyxFQUFFLENBQUE7SUFDWCxDQUFDO0lBT0QsS0FBSztRQUNILE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBa0IsT0FBTyxDQUFDLENBQUE7SUFDN0MsQ0FBQztJQU9ELGFBQWEsQ0FBQyxHQUFXLEVBQUUsSUFBWTtRQUNyQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQVMsZUFBZSxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7SUFDM0QsQ0FBQztJQU9ELFNBQVMsQ0FBQyxHQUFXLEVBQUUsRUFBVTtRQUMvQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQVMsV0FBVyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDckQsQ0FBQztJQU1ELFFBQVEsQ0FBQyxJQUFZO1FBQ25CLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBUyxVQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFBO0lBQ3BFLENBQUM7SUFpQ0QsT0FBTyxDQUFDLElBQVksRUFBRSxJQUFZLEVBQUUsTUFBYyxFQUFFLEdBQVcsRUFBRSxJQUFZLEVBQUUsT0FBZTtRQUM1RixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFBO0lBQ2hGLENBQUM7SUFPRCxxQkFBcUIsQ0FBQyxJQUFZO1FBQ2hDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyw2QkFBNkIsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7SUFDNUQsQ0FBQztJQVNELGVBQWUsQ0FBQyxJQUFZLEVBQUUsTUFBYyxFQUFFLElBQVk7UUFDeEQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ3BFLENBQUM7SUFRRCxPQUFPLENBQUMsSUFBWSxFQUFFLEtBQWE7UUFDakMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0lBQ3BELENBQUM7SUFFRCxHQUFHLENBQUMsSUFBUztRQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBUyxXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQ2xELENBQUM7SUFNRCxPQUFPO1FBQ0wsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFrQixTQUFTLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBTUQsUUFBUTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBZ0IsVUFBVSxDQUFDLENBQUE7SUFDOUMsQ0FBQztJQVFELFFBQVEsQ0FBQyxRQUFnQixJQUFJLElBQUksRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsR0FBRyxVQUFVLEVBQUUsTUFBYyxJQUFJLElBQUksRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsR0FBRyxXQUFXO1FBQ3hLLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBOEMsaUNBQWlDLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUNuSCxDQUFDO0lBT0QsWUFBWSxDQUFDLEVBQVc7UUFDdEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDM0MsQ0FBQztJQU9ELGlCQUFpQixDQUFDLEdBQVc7UUFDM0IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUF1QixtQkFBbUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUE7SUFDdkUsQ0FBQztJQVFELGNBQWMsQ0FBQyxHQUFXLEVBQUUsSUFBWTtRQUN0QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUNwRCxDQUFDO0lBTUQsZUFBZSxDQUFDLEdBQVc7UUFDekIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBT0QsZUFBZSxDQUFDLEdBQVc7UUFDekIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBT0QsV0FBVyxDQUFDLElBQVk7UUFDdEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFrQixhQUFhLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO0lBQzdELENBQUM7SUFPRCxtQkFBbUIsQ0FBQyxHQUFXLEVBQUUsR0FBVztRQUMxQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUN4RCxDQUFDO0lBUUQsbUJBQW1CLENBQUMsR0FBVyxFQUFFLFFBQWdDO1FBQy9ELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFBO0lBQzdELENBQUM7SUFRRCxpQkFBaUI7UUFDZixPQUFPLElBQUksQ0FBQyxLQUFLLENBQWlCLG1CQUFtQixDQUFDLENBQUE7SUFDeEQsQ0FBQztJQVFELHVCQUF1QixDQUFDLElBQWMsRUFBRSxLQUFlO1FBQ3JELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyx5QkFBeUIsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0lBQy9ELENBQUM7SUFRRCxjQUFjLENBQUMsSUFBNEI7UUFDekMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBT0QsUUFBUTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtJQUMvQixDQUFDO0lBT0QsUUFBUTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQTtJQUMvQixDQUFDO0lBT0Qsb0JBQW9CLENBQUMsUUFBZ0I7UUFDbkMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFpQyxzQkFBc0IsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUE7SUFDekYsQ0FBQztJQU1ELGdCQUFnQixDQUFDLFFBQWdCO1FBQy9CLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBaUMsa0JBQWtCLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFBO0lBQ3JGLENBQUM7SUFPRCxlQUFlLENBQUMsR0FBVyxFQUFFLEdBQW9CO1FBQy9DLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBdUIsaUJBQWlCLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUMxRSxDQUFDO0lBVUQsZ0JBQWdCLENBQUMsR0FBVyxFQUFFLEdBQW9CLEVBQUUsSUFBWSxFQUFFLFFBQWdCO1FBQ2hGLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBeUIsa0JBQWtCLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFBO0lBQzdGLENBQUM7SUFPRCxpQkFBaUIsQ0FBQyxHQUFXLEVBQUUsR0FBVztRQUN4QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUN0RCxDQUFDO0lBUUQsdUJBQXVCLENBQUMsS0FBNEIsRUFBRSxJQUF5QjtRQUM3RSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQXlCLHlCQUF5QixFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7SUFDdkYsQ0FBQztJQU9ELFdBQVcsQ0FBQyxRQUFnQjtRQUMxQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQWdCLGFBQWEsRUFBRSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUE7SUFDL0QsQ0FBQztJQVNELG9CQUFvQixDQUFDLFFBQWdCLEVBQUUsSUFBZ0MsRUFBRSxHQUFRO1FBQy9FLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUNwRSxDQUFDO0lBV0QsUUFBUSxDQUFDLEdBQVcsRUFBRSxHQUFXLEVBQUUsUUFBZ0IsRUFBRSxJQUFZLEVBQUUsS0FBYTtRQUM5RSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUE7SUFDcEUsQ0FBQztJQU9ELFdBQVcsQ0FBQyxHQUFXO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBZ0IsYUFBYSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUMxRCxDQUFDO0lBTUQsYUFBYSxDQUFDLEVBQVU7UUFDdEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFrQixlQUFlLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQzdELENBQUM7SUFNRCxjQUFjLENBQUMsRUFBVTtRQUN2QixPQUFPLElBQUksQ0FBQyxLQUFLLENBQW1CLGdCQUFnQixFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUMvRCxDQUFDO0lBUUQsY0FBYyxDQUFDLElBQVksRUFBRSxJQUEyQjtRQUN0RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUNyRCxDQUFDO0lBUUQsaUJBQWlCLENBQUMsRUFBVTtRQUMxQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQ2hELENBQUM7SUFTRCxhQUFhLENBQUMsRUFBVSxFQUFFLElBQVksRUFBRSxFQUFVLEVBQUUsTUFBb0M7UUFDdEYsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUF5QixlQUFlLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFBO0lBQ3RGLENBQUM7SUFJRCx3QkFBd0IsQ0FBQyxTQUE0QixFQUFFLFdBQXVDLEtBQUs7UUFDakcsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFvQix3QkFBd0IsRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQTtJQUNySixDQUFDO0lBR0Qsb0JBQW9CLENBQUMsRUFBVTtRQUM3QixPQUFPLElBQUksQ0FBQyxLQUFLLENBQVMsc0JBQXNCLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFnQkQsWUFBWSxDQUFDLEdBQVc7UUFDdEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFTLG1CQUFtQixFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQTtJQUN6RCxDQUFDO0lBTUQsS0FBSztRQUNILE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBb0IsWUFBWSxDQUFFLENBQUE7SUFDckQsQ0FBQztJQVFELG1CQUFtQixDQUFDLE1BQWMsRUFBRSxTQUFpQjtRQUNuRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsMEJBQTBCLEVBQUUsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQTtJQUN0RSxDQUFDO0lBT0QsZUFBZSxDQUFDLEdBQVc7UUFDekIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFnQixhQUFhLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFBO0lBQzFELENBQUM7SUFPRCxjQUFjLENBQUMsR0FBYSxFQUFFLFFBQWdDO1FBQzVELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBcUIscUJBQXFCLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQTtJQUNqRixDQUFDO0lBT0QsY0FBYyxDQUFDLEVBQVU7UUFDdkIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFtQixnQkFBZ0IsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDL0QsQ0FBQztJQU9ELGNBQWMsQ0FBQyxFQUFVO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDbEQsQ0FBQztJQU1ELGVBQWU7UUFDYixPQUFPLElBQUksQ0FBQyxLQUFLLENBQXFCLHNCQUFzQixDQUFDLENBQUE7SUFDL0QsQ0FBQztJQU9ELGNBQWMsQ0FBQyxHQUFXLEVBQUUsT0FBZTtRQUN6QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQXlCLHFCQUFxQixFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUE7SUFDcEYsQ0FBQztJQU9ELFlBQVksQ0FBQyxHQUFXO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUE7SUFDakQsQ0FBQztJQU1ELEVBQUUsQ0FBQyxJQUFZO1FBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFTLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7SUFDM0MsQ0FBQztJQVlELEtBQUssQ0FBQyxLQUFLLENBQUksR0FBVyxFQUFFLE9BQWUsRUFBRSxFQUFFLFNBQXlCLE1BQU07UUFDNUUsTUFBTSxLQUFLLEdBQVcsSUFBSSxDQUFDLEtBQUssSUFBSSxNQUFNLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFBO1FBQzdHLE9BQU8sTUFBTSxJQUFJLE9BQU8sQ0FBWSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUN0RCxFQUFFLENBQUMsT0FBTyxDQUFZO2dCQUNwQixPQUFPLEVBQUUsSUFBSSxHQUFHLEVBQUU7Z0JBQ2xCLEdBQUcsRUFBRSxtQkFBVSxHQUFHLE9BQU8sR0FBRyxHQUFHO2dCQUMvQixJQUFJO2dCQUNKLE1BQU07Z0JBQ04sV0FBVyxFQUFFLElBQUk7Z0JBQ2pCLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO2dCQUM3QixPQUFPLEVBQUUsR0FBRyxDQUFDLEVBQUU7b0JBQ2IsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxHQUFHLEVBQUU7d0JBQ3pCLEVBQUUsQ0FBQyxVQUFVLENBQUM7NEJBQ1osR0FBRyxFQUFFLHlDQUF5Qzs0QkFDOUMsTUFBTSxFQUFFO2dDQUNOLElBQUksRUFBRSxDQUFDLElBQVksRUFBRSxFQUFFO29DQUNyQixJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUU7d0NBQzlELElBQUksY0FBYyxDQUFDLElBQUksRUFBRTs0Q0FDdkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtnREFDdkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFXLENBQUMsQ0FBQTs0Q0FDMUIsQ0FBQyxDQUFDLENBQUE7eUNBQ0g7NkNBQU07NENBQ0wsRUFBRSxDQUFDLFNBQVMsQ0FBQztnREFDWCxLQUFLLEVBQUUsT0FBTztnREFDZCxPQUFPLEVBQUUsUUFBUTs2Q0FDbEIsQ0FBQyxDQUFBOzRDQUNGLE1BQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQTt5Q0FDbEI7b0NBQ0gsQ0FBQyxDQUFDLENBQUE7Z0NBQ0osQ0FBQzs2QkFDRjt5QkFDRixDQUFDLENBQUE7cUJBQ0g7O3dCQUNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBVyxDQUFDLENBQUE7Z0JBQzVCLENBQUM7Z0JBQ0QsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFO29CQUNSLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUVuQixFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUE7b0JBQ25ELEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtvQkFDaEIsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUNYLENBQUM7YUFDRixDQUFDLENBQUE7UUFDSixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRjtBQUVELGtCQUFlLElBQUksR0FBRyxFQUFFLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1cmxSZXF1ZXN0IH0gZnJvbSBcIi4uL2NvbmZpZ1wiXG5cbmV4cG9ydCBpbnRlcmZhY2UgdGVuY2V0TWFwIHtcbiAgLyog54q25oCB56CB77yMMOS4uuato+W4uCxcbjMxMOivt+axguWPguaVsOS/oeaBr+acieivr++8jFxuMzExS2V55qC85byP6ZSZ6K+vLFxuMzA26K+35rGC5pyJ5oqk5oyB5L+h5oGv6K+35qOA5p+l5a2X56ym5LiyLFxuMTEw6K+35rGC5p2l5rqQ5pyq6KKr5o6I5p2DICovXG4gIHN0YXR1czogbnVtYmVyLFxuICByZXF1ZXN0X2lkOiBzdHJpbmcsXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICByZXN1bHQ6IGFueVxufVxuXG5pbnRlcmZhY2UgcmVzdWx0PFQgPSBhbnk+IHtcbiAgY29kZTogbnVtYmVyXG4gIGRhdGE6IFRcbiAgbXNnOiBzdHJpbmdcbiAgW3g6IHN0cmluZ106IGFueVxufVxuXG4vKipcbiAqIEBjbGFzcyB3cOWuouaIt+err+e7n+S4gOivt+axgmFwaVxuICovXG5jbGFzcyBhcGkge1xuICB0b2tlbjogc3RyaW5nXG4gIHdzITogV2VjaGF0TWluaXByb2dyYW0uU29ja2V0VGFza1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnRva2VuID0gXCJcIlxuICB9XG5cbiAgc2V0VG9rZW4odG9rZW46IHN0cmluZykge1xuICAgIHRoaXMudG9rZW4gPSB0b2tlblxuICAgIHd4LnNldEJhY2tncm91bmRGZXRjaFRva2VuKHtcbiAgICAgIHRva2VuXG4gICAgfSkvKiBcbiAgICB3eC5zZXRTdG9yYWdlKHsga2V5OiAndG9rZW4nLCBkYXRhOiB0b2tlbiB9KVxuICAgIGNvbnN0IHdzID0gd3guY29ubmVjdFNvY2tldCh7XG4gICAgICB1cmw6IHVybFdzLFxuICAgICAgaGVhZGVyOiB7XG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIHRva2VuXG4gICAgICB9LFxuICAgICAgc3VjY2VzczoocmVzKSA9PntcbiAgICAgICAgY29uc29sZS5sb2coe3Jlc30pO1xuICAgICAgICBcblxuICAgICAgfSxcbiAgICAgIGZhaWwoZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coe2Vycn0pO1xuICAgICAgICBcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMud3MgPSB3c1xuICAgIHdzLnNlbmQoe2RhdGE6J3Nzc3Nzc3MnfSkgKi9cbiAgfVxuXG4gIC8qKlxuICAgKiDnmbvlvZUtIOWfn+WQjVxuICAgKiBAcGFyYW0gZGF0YSBcbiAgICovXG4gIGFzeW5jIGxvZ2luKGRhdGE6IHsganNfY29kZTogc3RyaW5nLCBzY2VuZT86IHN0cmluZyB9KSB7XG4gICAgY29uc3QgZWwgPSBhd2FpdCB0aGlzLmZldGNoPHsgdG9rZW46IHN0cmluZyB9PihcImF1dGgvY29kZTJTZXNzaW9uXCIsIGRhdGEsIFwiR0VUXCIpXG4gICAgaWYgKGVsLmNvZGUpIHtcbiAgICAgIHRoaXMuc2V0VG9rZW4oZWwuZGF0YS50b2tlbilcbiAgICB9XG4gICAgcmV0dXJuIGVsXG4gIH1cblxuICAvKipcbiAgICog55m75b2VLeeUqOS6juWwj+eoi+W6j+eZu+W9lemhtemdoueZu+W9lVxuICAgKiBAcGFyYW0gZGF0YSBcbiAgICovXG4gIGFzeW5jIHVzZXJsb2dpbihkYXRhOiB7IG9wZW5pZDogc3RyaW5nLCB1bmlvbmlkOiBzdHJpbmcsIGF2YW50ZXI6IHN0cmluZywgdXNlcjogc3RyaW5nLCBwYXNzd2Q6IHN0cmluZyB9KSB7XG4gICAgY29uc3QgZWwgPSBhd2FpdCB0aGlzLmZldGNoPHsgdG9rZW46IHN0cmluZyB9PignYXV0aC93cGxvZ2luJywgZGF0YSlcbiAgICBpZiAoZWwuY29kZSkge1xuICAgICAgdGhpcy5zZXRUb2tlbihlbC5kYXRhLnRva2VuKVxuICAgIH1cbiAgICByZXR1cm4gZWxcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrDnlKjmiLflpLTlg4/lkozmmLXnp7BcbiAgICogQHBhcmFtIG5pY2tOYW1lIOaYteensFxuICAgKiBAcGFyYW0gYXZhbnRlciDlpLTlg4/pk77mjqVcbiAgICovXG4gIHVwZGF0ZUF2YW50ZXIobmlja05hbWU6IHN0cmluZywgYXZhbnRlcjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3VwZGF0ZUF2YW50ZXInLCB7IG5pY2tOYW1lLCBhdmFudGVyIH0pXG4gIH1cblxuICAvKipcbiAgICog55So5LqO6Kej57uR5b6u5L+h5ZKM6YCP5Lyg6LSm5Y+355qE57uR5a6a5YWz57O7XG4gICAqL1xuICBhc3luYyB1bmJpbmR3eCgpIHtcbiAgICBjb25zdCBlbCA9IGF3YWl0IHRoaXMuZmV0Y2goJ3VuYmluZHd4JylcbiAgICB0aGlzLnRva2VuID0gXCJcIlxuICAgIHJldHVybiBlbFxuICB9XG5cbiAgLyoqXG4gICAqIOino+WvhueUteivneWtl+espuS4slxuICAgKiBAcGFyYW0gZGF0YSBcbiAgICovXG4gIGdldHBob25lbnVtYmVyKGRhdGE6IHsgb3BlbmlkOiBzdHJpbmcsIGVuY3J5cHRlZERhdGE6IHN0cmluZywgaXY6IHN0cmluZyB9KSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8eyBwaG9uZU51bWJlcjogc3RyaW5nIH0+KFwiYXV0aC9nZXRwaG9uZW51bWJlclwiLCBkYXRhKVxuICB9XG5cbiAgLyoqXG4gICAqIOazqOWGjFxuICAgKiBAcGFyYW0gZGF0YSBcbiAgICovXG4gIHJlZ2lzdGVyVXNlcihkYXRhOiB7IHVzZXI6IHN0cmluZywgb3BlbmlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdGVsOiBzdHJpbmcsIGF2YW50ZXI6IHN0cmluZyB9KSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJhdXRoL3d4UmVnaXN0ZXJcIiwgZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiDnu5HlrppEVFVcbiAgICogQHBhcmFtIG1hYyBcbiAgICovXG4gIGJpbmREZXYobWFjOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxhbnk+KCdiaW5kRGV2JywgeyBtYWMgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmnKrnoa7orqTlkYrorabmlbDph49cbiAgICovXG4gIGdldEFsYXJtdW5jb25maXJtZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8bnVtYmVyPignZ2V0QWxhcm11bmNvbmZpcm1lZCcpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+WZ3Bz5a6a5L2N55qE6K+m57uG5Zyw5Z2AXG4gICAqIEBwYXJhbSBsb2NhdGlvbiBcbiAgICovXG4gIGdldEdQU2FkZHJlc3MobG9jYXRpb246IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPGFueT4oJ2dldEdQU2FkZHJlc3MnLCB7IGxvY2F0aW9uIH0pXG4gIH1cblxuICAvKipcbiAgICog5rOo6ZSA5b6u5L+hXG4gICAqL1xuICBhc3luYyBjYW5jZWx3eCgpIHtcbiAgICBjb25zdCBlbCA9IGF3YWl0IHRoaXMuZmV0Y2g8c3RyaW5nPignY2FuY2Vsd3gnKVxuICAgIHRoaXMudG9rZW4gPSBcIlwiXG4gICAgcmV0dXJuIGVsXG4gIH1cblxuXG5cbiAgLyoqXG4gICAqIOa3u+WKoOiZmuaLn+iuvuWkh1xuICAgKi9cbiAgYWRkVm0oKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5UZXJtaW5hbFtdPignYWRkVm0nKVxuICB9XG5cbiAgLyoqXG4gICAqIOS/ruaUuURUVeWQjeensFxuICAgKiBAcGFyYW0gZHR1IG1hY1xuICAgKiBAcGFyYW0gbmFtZSDmlrDnmoTlkI3np7BcbiAgICovXG4gIG1vZGlmeURUVU5hbWUoZHR1OiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHN0cmluZz4oJ21vZGlmeURUVU5hbWUnLCB7IGR0dSwgbmFtZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsGR0deWumuS9jVxuICAgKiBAcGFyYW0gZHR1IGR0dU1hY1xuICAgKiBAcGFyYW0gancg57uP57qs5bqmXG4gICAqL1xuICB1cGRhdGVHcHMobWFjOiBzdHJpbmcsIGp3OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxzdHJpbmc+KCd1cGRhdGVHcHMnLCB7IG1hYywgancgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiB3ZWLnmbvlvZVcbiAgICogQHBhcmFtIGNvZGUgdG9rZW5cbiAgICovXG4gIHdlYkxvZ2luKGNvZGU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHN0cmluZz4oJ3dlYkxvZ2luJywgeyBjb2RlLCB0b2tlbjogdGhpcy50b2tlbiB9KVxuICB9XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiAgLyoqXG4gICAqIOa3u+WKoOeUqOaIt1xuICAgKiBAcGFyYW0gbmFtZSBcbiAgICogQHBhcmFtIHVzZXIgXG4gICAqIEBwYXJhbSBwYXNzd2QgXG4gICAqIEBwYXJhbSB0ZWwgeFxuICAgKiBAcGFyYW0gbWFpbCBcbiAgICogQHBhcmFtIGNvbXBhbnkgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgYWRkVXNlcihuYW1lOiBzdHJpbmcsIHVzZXI6IHN0cmluZywgcGFzc3dkOiBzdHJpbmcsIHRlbDogc3RyaW5nLCBtYWlsOiBzdHJpbmcsIGNvbXBhbnk6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwiZ3Vlc3QvYWRkVXNlclwiLCB7IG5hbWUsIHVzZXIsIHBhc3N3ZCwgdGVsLCBtYWlsLCBjb21wYW55IH0pXG4gIH1cblxuICAvKipcbiAgICog6YeN572u5a+G56CB5Yiw5Y+R6YCB6aqM6K+B56CBXG4gICAqIEBwYXJhbSB1c2VyIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHJlc2V0UGFzc3dkVmFsaWRhdGlvbih1c2VyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImd1ZXN0L3Jlc2V0UGFzc3dkVmFsaWRhdGlvblwiLCB7IHVzZXIgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDph43nva7nlKjmiLflr4bnoIFcbiAgICogQHBhcmFtIHVzZXIgXG4gICAqIEBwYXJhbSBwYXNzd2QgXG4gICAqIEBwYXJhbSBjb2RlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHJlc2V0VXNlclBhc3N3ZCh1c2VyOiBzdHJpbmcsIHBhc3N3ZDogc3RyaW5nLCBjb2RlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImd1ZXN0L3Jlc2V0VXNlclBhc3N3ZFwiLCB7IHVzZXIsIHBhc3N3ZCwgY29kZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOW+ruS/oeeZu+W9lVxuICAgKiBAcGFyYW0gY29kZSBcbiAgICogQHBhcmFtIHN0YXRlIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHd4bG9naW4oY29kZTogc3RyaW5nLCBzdGF0ZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJhdXRoL3d4bG9naW5cIiwgeyBjb2RlLCBzdGF0ZSB9KVxuICB9XG5cbiAgY3JjKGRhdGE6IGFueSkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHN0cmluZz4oXCJvcGVuLy9jcmNcIiwgeyBkYXRhIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W55So5oi357uR5a6a6K6+5aSHXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgQmluZERldigpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LkJpbmREZXZpY2U+KFwiQmluZERldlwiKVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlueUqOaIt+S/oeaBr1xuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuVXNlckluZm8+KFwidXNlckluZm9cIilcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bnlKjmiLflkYroraZcbiAgICogQHBhcmFtIHN0YXJ0IFxuICAgKiBAcGFyYW0gZW5kIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGdldEFsYXJtKHN0YXJ0OiBzdHJpbmcgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpLnJlcGxhY2UoL1xcLy9nLCBcIi1cIikgKyBcIiAwOjAwOjAwXCIsIGVuZDogc3RyaW5nID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKS5yZXBsYWNlKC9cXC8vZywgXCItXCIpICsgXCIgMjM6NTk6NTlcIikge1xuICAgIHJldHVybiB0aGlzLmZldGNoPChVYXJ0LnVhcnRBbGFybU9iamVjdCAmIHsgdGltZTogc3RyaW5nIH0pW10+KFwibG9ndWFydHRlcm1pbmFsZGF0YXRyYW5zZmluaXRlc1wiLCB7IHN0YXJ0LCBlbmQgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDnoa7orqTnlKjmiLflkYroraZcbiAgICogQHBhcmFtIGlkIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGNvbmZyaW1BbGFybShpZD86IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwiY29uZnJpbUFsYXJtXCIsIHsgaWQgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmjIflrprkuJTlnKjnur/nmoTnu4jnq69cbiAgICogQHBhcmFtIG1hYyBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBnZXRUZXJtaW5hbE9ubGluZShtYWM6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuVGVybWluYWwgfCBudWxsPihcImdldFRlcm1pbmFsT25saW5lXCIsIHsgbWFjIH0pXG4gIH1cblxuICAvKipcbiAgKiDkv67mlLnnlKjmiLforr7lpIfliKvlkI1cbiAgKiBAcGFyYW0gbWFjIFxuICAqIEBwYXJhbSBuYW1lIFxuICAqIEByZXR1cm5zIFxuICAqL1xuICBtb2RpZnlUZXJtaW5hbChtYWM6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goJ21vZGlmeVRlcm1pbmFsJywgeyBtYWMsIG5hbWUgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOa3u+WKoOe7keWumuiuvuWkh1xuICAqIEBwYXJhbSBtYWMgXG4gICovXG4gIGFkZFVzZXJUZXJtaW5hbChtYWM6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwiYWRkVXNlclRlcm1pbmFsXCIsIHsgbWFjIH0pXG4gIH1cblxuICAvKipcbiAgKiDliKDpmaTnu5Hlrprorr7lpIdcbiAgKiBAcGFyYW0gbWFjIFxuICAqIEByZXR1cm5zIFxuICAqL1xuICBkZWxVc2VyVGVybWluYWwobWFjOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImRlbFVzZXJUZXJtaW5hbFwiLCB7IG1hYyB9KVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W6K6+5aSH57G75Z6LXG4gICogQHBhcmFtIFR5cGUgXG4gICogQHJldHVybnMgXG4gICovXG4gIGdldERldlR5cGVzKFR5cGU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuRGV2c1R5cGVbXT4oXCJnZXREZXZUeXBlc1wiLCB7IFR5cGUgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOWIoOmZpOe7iOerr+aMgui9veiuvuWkh1xuICAqIEBwYXJhbSBtYWMgXG4gICogQHBhcmFtIHBpZCBcbiAgKi9cbiAgZGVsVGVybWluYWxNb3VudERldihtYWM6IHN0cmluZywgcGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImRlbFRlcm1pbmFsTW91bnREZXZcIiwgeyBtYWMsIHBpZCB9KVxuICB9XG5cbiAgLyoqXG4gICogwqDCoOa3u+WKoOeUqOaIt+e7iOerr+aMgui9veiuvuWkh1xuICAqIEBwYXJhbSBtYWMgXG4gICogQHBhcmFtIHBhcmFtMiBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgYWRkVGVybWluYWxNb3VudERldihtYWM6IHN0cmluZywgbW91bnREZXY6IFVhcnQuVGVybWluYWxNb3VudERldnMpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImFkZFRlcm1pbmFsTW91bnREZXZcIiwgeyBtYWMsIG1vdW50RGV2IH0pXG4gIH1cblxuICAvKipcbiAgKiDojrflj5bnlKjmiLflkYrorabphY3nva5cbiAgKiBAcGFyYW0gdXNlciBcbiAgKiBAcGFyYW0gZmlsdGVyIFxuICAqIEByZXR1cm5zIFxuICAqL1xuICBnZXRVc2VyQWxhcm1TZXR1cCgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LnVzZXJTZXR1cD4oXCJnZXRVc2VyQWxhcm1TZXR1cFwiKVxuICB9XG5cbiAgLyoqXG4gICog5L+u5pS555So5oi35ZGK6K2m6YWN572u6IGU57O75pa55byPXG4gICogQHBhcmFtIHRlbHMg6IGU57O755S16K+dXG4gICogQHBhcmFtIG1haWxzIOiBlOezu+mCrueusVxuICAqIEByZXR1cm5zIFxuICAqL1xuICBtb2RpZnlVc2VyQWxhcm1TZXR1cFRlbCh0ZWxzOiBzdHJpbmdbXSwgbWFpbHM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJtb2RpZnlVc2VyQWxhcm1TZXR1cFRlbFwiLCB7IHRlbHMsIG1haWxzIH0pXG4gIH1cblxuICAvKipcbiAgKiDkv67mlLnnlKjmiLfkv6Hmga9cbiAgKiBAcGFyYW0gdXNlciBcbiAgKiBAcGFyYW0gZGF0YSBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgbW9kaWZ5VXNlckluZm8oZGF0YTogUGFydGlhbDxVYXJ0LlVzZXJJbmZvPikge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwibW9kaWZ5VXNlckluZm9cIiwgeyBkYXRhIH0pXG4gIH1cblxuICAvKipcbiAgKiDojrflj5blhazkvJflj7fkuoznu7TnoIFcbiAgKiBAcGFyYW0gdXNlciBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgbXBUaWNrZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJtcFRpY2tldFwiKVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W5bCP56iL5bqP5LqM57u056CBXG4gICogQHBhcmFtIHVzZXIgXG4gICogQHJldHVybnMgXG4gICovXG4gIHdwVGlja2V0KCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwid3BUaWNrZXRcIilcbiAgfVxuXG5cbiAgLyoqXG4gICog6I635Y+W55So5oi35Y2V5Liq5Y2P6K6u5ZGK6K2m6YWN572uXG4gICogQHBhcmFtIHByb3RvY29sIFxuICAqL1xuICBnZXRVc2VyQWxhcm1Qcm90b2NvbChwcm90b2NvbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5Qcm90b2NvbENvbnN0YW50VGhyZXNob2xkPihcImdldFVzZXJBbGFybVByb3RvY29sXCIsIHsgcHJvdG9jb2wgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOiOt+WPluWNleS4quWNj+iuruWRiuitpumFjee9rlxuICAqIEBwYXJhbSBwcm90b2NvbCBcbiAgKi9cbiAgZ2V0QWxhcm1Qcm90b2NvbChwcm90b2NvbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5Qcm90b2NvbENvbnN0YW50VGhyZXNob2xkPihcImdldEFsYXJtUHJvdG9jb2xcIiwgeyBwcm90b2NvbCB9KVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W55So5oi36K6+5aSH6L+Q6KGM5pWw5o2uXG4gICogQHBhcmFtIG1hYyBcbiAgKiBAcGFyYW0gcGlkIFxuICAqL1xuICBnZXRUZXJtaW5hbERhdGEobWFjOiBzdHJpbmcsIHBpZDogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5xdWVyeVJlc3VsdFNhdmU+KFwiZ2V0VGVybWluYWxEYXRhXCIsIHsgbWFjLCBwaWQgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bnlKjmiLforr7lpIfljoblj7Lov5DooYzmlbDmja5cbiAgICogQHBhcmFtIG1hYyBcbiAgICogQHBhcmFtIHBpZCBcbiAgICogQHBhcmFtIG5hbWUgXG4gICAqIEBwYXJhbSBkYXRldGltZSBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBnZXRUZXJtaW5hbERhdGFzKG1hYzogc3RyaW5nLCBwaWQ6IG51bWJlciB8IHN0cmluZywgbmFtZTogc3RyaW5nLCBkYXRldGltZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5xdWVyeVJlc3VsdFNhdmVbXT4oXCJnZXRUZXJtaW5hbERhdGFzXCIsIHsgbWFjLCBwaWQsIG5hbWUsIGRhdGV0aW1lIH0pXG4gIH1cblxuICAvKipcbiAgKiDph43nva7orr7lpIfotoXml7bnirbmgIFcbiAgKiBAcGFyYW0gbWFjIFxuICAqIEBwYXJhbSBwaWQgXG4gICovXG4gIHJlZnJlc2hEZXZUaW1lT3V0KG1hYzogc3RyaW5nLCBwaWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwicmVmcmVzaERldlRpbWVPdXRcIiwgeyBtYWMsIHBpZCB9KVxuICB9XG5cbiAgLyoqXG4gICog5Zu65a6a5Y+R6YCB6K6+5aSH5pON5L2c5oyH5LukXG4gICogQHBhcmFtIHF1ZXJ5IFxuICAqIEBwYXJhbSBpdGVtIFxuICAqIEByZXR1cm5zIFxuICAqL1xuICBTZW5kUHJvY290b2xJbnN0cnVjdFNldChxdWVyeTogVWFydC5pbnN0cnVjdFF1ZXJ5QXJnLCBpdGVtOiBVYXJ0Lk9wcmF0ZUluc3RydWN0KSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5BcG9sbG9Nb25nb1Jlc3VsdD4oXCJTZW5kUHJvY290b2xJbnN0cnVjdFNldFwiLCB7IHF1ZXJ5LCBpdGVtIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5oyH5a6a5Y2P6K6uXG4gICAqIEBwYXJhbSBwcm90b2NvbCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBnZXRQcm90b2NvbChwcm90b2NvbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5wcm90b2NvbD4oXCJnZXRQcm90b2NvbFwiLCB7IHByb3RvY29sIH0pXG4gIH1cblxuICAvKipcbiAgKiDorr7nva7nlKjmiLfoh6rlrprkuYnorr7nva4o5Y2P6K6u6YWN572uKVxuICAqIEBwYXJhbSBQcm90b2NvbCDljY/orq5cbiAgKiBAcGFyYW0gdHlwZSDmk43kvZznsbvlnotcbiAgKiBAcGFyYW0gYXJnIOWPguaVsFxuICAqIEByZXR1cm5zIFxuICAqL1xuICBzZXRVc2VyU2V0dXBQcm90b2NvbChwcm90b2NvbDogc3RyaW5nLCB0eXBlOiBVYXJ0LkNvbnN0YW50VGhyZXNob2xkVHlwZSwgYXJnOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcInNldFVzZXJTZXR1cFByb3RvY29sXCIsIHsgcHJvdG9jb2wsIHR5cGUsIGFyZyB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOiuvuWkh+iuvuWkh+WIq+WQjVxuICAgKiBAcGFyYW0gbWFjIFxuICAgKiBAcGFyYW0gcGlkIFxuICAgKiBAcGFyYW0gcHJvdG9jb2wgXG4gICAqIEBwYXJhbSBuYW1lIFxuICAgKiBAcGFyYW0gYWxpYXMgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgc2V0QWxpYXMobWFjOiBzdHJpbmcsIHBpZDogbnVtYmVyLCBwcm90b2NvbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGFsaWFzOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcInNldEFsaWFzXCIsIHsgbWFjLCBwaWQsIHByb3RvY29sLCBuYW1lLCBhbGlhcyB9KVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W57uI56uv5L+h5oGvXG4gICogQHBhcmFtIG1hYyBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgZ2V0VGVybWluYWwobWFjOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LlRlcm1pbmFsPihcImdldFRlcm1pbmFsXCIsIHsgbWFjIH0pXG4gIH1cblxuICAvKipcbiAgKiAg6I635Y+W55So5oi35biD5bGA6YWN572uXG4gICogQHBhcmFtIGlkIFxuICAqL1xuICBnZXRVc2VyTGF5b3V0KGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LnVzZXJMYXlvdXQ+KFwiZ2V0VXNlckxheW91dFwiLCB7IGlkIH0pXG4gIH1cblxuICAvKipcbiAgKiAg6I635Y+W55So5oi35biD5bGA6YWN572uXG4gICogQHBhcmFtIGlkIFxuICAqL1xuICBnZXRBZ2dyZWdhdGlvbihpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5BZ2dyZWdhdGlvbj4oXCJnZXRBZ2dyZWdhdGlvblwiLCB7IGlkIH0pXG4gIH1cblxuICAvKipcbiAgKiDmt7vliqDogZrlkIjorr7lpIdcbiAgKiBAcGFyYW0gbmFtZSBcbiAgKiBAcGFyYW0gYWdncyBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgYWRkQWdncmVnYXRpb24obmFtZTogc3RyaW5nLCBhZ2dzOiBVYXJ0LkFnZ3JlZ2F0aW9uRGV2W10pIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImFkZEFnZ3JlZ2F0aW9uXCIsIHsgbmFtZSwgYWdncyB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOWIoOmZpOiBmuWQiOiuvuWkh1xuICAgKiBAcGFyYW0gdXNlciBcbiAgICogQHBhcmFtIGlkIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGRlbGV0ZUFnZ3JlZ2F0aW9uKGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImRlbGV0ZUFnZ3JlZ2F0aW9uXCIsIHsgaWQgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOiuvue9rueUqOaIt+W4g+WxgOmFjee9rlxuICAqIEBwYXJhbSBpZCBcbiAgKiBAcGFyYW0gdHlwZSBcbiAgKiBAcGFyYW0gYmcgXG4gICogQHBhcmFtIExheW91dCBcbiAgKi9cbiAgc2V0VXNlckxheW91dChpZDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIGJnOiBzdHJpbmcsIExheW91dDogVWFydC5BZ2dyZWdhdGlvbkxheW91dE5vZGVbXSkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuQXBvbGxvTW9uZ29SZXN1bHQ+KFwic2V0VXNlckxheW91dFwiLCB7IGlkLCB0eXBlLCBiZywgTGF5b3V0IH0pXG4gIH1cblxuXG4gIC8vIFYyIGdwc+i9rOmrmOW+t2dwc1xuICBWMl9BUElfQWFtcF9ncHMyYXV0b2FudmkobG9jYXRpb25zOiBzdHJpbmcgfCBzdHJpbmdbXSwgY29vcmRzeXM6ICdncHMnIHwgJ21hcGJhcicgfCAnYmFpZHUnID0gXCJncHNcIikge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHN0cmluZyB8IHN0cmluZ1tdPigndXRpbC9BTWFwL0dQUzJhdXRvbmF2aScsIHsgY29vcmRzeXMsIGxvY2F0aW9uczogQXJyYXkuaXNBcnJheShsb2NhdGlvbnMpID8gbG9jYXRpb25zLmpvaW4oXCJ8XCIpIDogbG9jYXRpb25zIH0pXG4gIH1cblxuICAvLyBWMiBpcOi9rGdwc1xuICBWMl9BUElfQWFtcF9pcDJsb2NhbChpcDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8c3RyaW5nPihcInV0aWwvQU1hcC9JUDJsb2N0aW9uXCIsIHsgaXAgfSlcbiAgfVxuXG5cblxuXG5cblxuXG5cblxuXG5cbiAgLyoqXG4gICog6I635Y+WZHR16L+c56iL6LCD6K+V572R5Z2AXG4gICogQHBhcmFtIG1hYyBcbiAgKi9cbiAgaW90UmVtb3RlVXJsKG1hYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8c3RyaW5nPigncm9vdC9pb3RSZW1vdGVVcmwnLCB7IG1hYyB9KVxuICB9XG5cbiAgLyoqXG4gICAgICog6I635Y+W5omA5pyJ6IqC54K5XG4gICAgICogQHBhcmFtIG5hbWUgXG4gICAgICovXG4gIE5vZGVzKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuTm9kZUNsaWVudFtdPihcInJvb3QvTm9kZXNcIiwpXG4gIH1cblxuICAvKipcbiAgICAgKiDmt7vliqDnmbvorrDorr7lpIdcbiAgICAgKiBAcGFyYW0gRGV2TWFjIFxuICAgICAqIEBwYXJhbSBtb3VudE5vZGUgXG4gICAgICogQHJldHVybnMgXG4gICAgICovXG4gIGFkZFJlZ2lzdGVyVGVybWluYWwoRGV2TWFjOiBzdHJpbmcsIG1vdW50Tm9kZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJyb290L2FkZFJlZ2lzdGVyVGVybWluYWxcIiwgeyBEZXZNYWMsIG1vdW50Tm9kZSB9KVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W57uI56uv5L+h5oGvXG4gICogQHBhcmFtIG1hYyBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgZ2V0Um9vdFRlcm1pbmFsKG1hYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5UZXJtaW5hbD4oXCJnZXRUZXJtaW5hbFwiLCB7IG1hYyB9KVxuICB9XG5cblxuICAvKipcbiAgICAgKiDms6jlhozorr7lpIdcbiAgICAgKiBAcGFyYW0gZGF0YSBcbiAgICAgKi9cbiAgYWRkUmVnaXN0ZXJEZXYoaWRzOiBzdHJpbmdbXSwgbW91bnREZXY6IFVhcnQuVGVybWluYWxNb3VudERldnMpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LnJlZ2lzdGVyRGV2W10+KFwicm9vdC9hZGRSZWdpc3RlckRldlwiLCB7IGlkcywgbW91bnREZXYgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmjIflrprms6jlhozorr7lpIdcbiAgICogQHBhcmFtIGlkIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGdldFJlZ2lzdGVyRGV2KGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LnJlZ2lzdGVyRGV2PihcImdldFJlZ2lzdGVyRGV2XCIsIHsgaWQgfSlcbiAgfVxuXG4gIC8qKlxuICAgICAqIOWIoOmZpOaMh+WumuazqOWGjOiuvuWkh1xuICAgICAqIEBwYXJhbSBpZCBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgZGVsUmVnaXN0ZXJEZXYoaWQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwicm9vdC9kZWxSZWdpc3RlckRldlwiLCB7IGlkIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5oyH5a6a5omA5pyJ6K6+5aSHXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgZ2V0UmVnaXN0ZXJEZXZzKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQucmVnaXN0ZXJEZXZbXT4oXCJyb290L2dldFJlZ2lzdGVyRGV2c1wiKVxuICB9XG5cblxuICAvKipcbiAgICAgICAgICog5Zu65a6a5Y+R6YCBRFRVIEFU5oyH5LukXG4gICAgICAgICAqIEByZXR1cm5zIFxuICAgICAgICAgKi9cbiAgc2VuZEFUSW5zdHJ1Y3QobWFjOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuQXBvbGxvTW9uZ29SZXN1bHQ+KFwicm9vdC9zZW5kQVRJbnN0cnVjdFwiLCB7IG1hYywgY29udGVudCB9KVxuICB9XG5cblxuICAvKipcbiAgICog5Yid5aeL5YyWZHR1XG4gICAqIEBwYXJhbSBtYWMgXG4gICAqL1xuICBpbml0VGVybWluYWwobWFjOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcInJvb3QvaW5pdFRlcm1pbmFsXCIsIHsgbWFjIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+WY29kZeWvueW6lOeahGJhc2U2NFFS5Zu+54mH5pWw5o2uXG4gICAqIEBwYXJhbSBjb2RlIFxuICAgKi9cbiAgcXIoY29kZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8c3RyaW5nPihcInFyXCIsIHsgY29kZSB9KVxuICB9XG5cblxuXG5cblxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgYXBp6YCa55SocmVxdXN05pa55rOVXG4gICAqIEBwYXJhbSBvYmplY3QgXG4gICAqL1xuICBhc3luYyBmZXRjaDxUPih1cmw6IHN0cmluZywgZGF0YTogT2JqZWN0ID0ge30sIG1ldGhvZDogXCJHRVRcIiB8IFwiUE9TVFwiID0gXCJQT1NUXCIpIHtcbiAgICBjb25zdCB0b2tlbjogc3RyaW5nID0gdGhpcy50b2tlbiB8fCBhd2FpdCB3eC5nZXRTdG9yYWdlKHsga2V5OiAndG9rZW4nIH0pLnRoZW4oZWwgPT4gZWwuZGF0YSkuY2F0Y2goKCkgPT4gXCJcIilcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8cmVzdWx0PFQ+PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB3eC5yZXF1ZXN0PHJlc3VsdDxUPj4oe1xuICAgICAgICB0aW1lb3V0OiAxMDAwICogNjAsXG4gICAgICAgIHVybDogdXJsUmVxdWVzdCArIFwiL2FwaS9cIiArIHVybCxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBlbmFibGVIdHRwMjogdHJ1ZSxcbiAgICAgICAgaGVhZGVyOiB7IHRva2VuLCB0eXBlOiAnd3AnIH0sXG4gICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMSkge1xuICAgICAgICAgICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICAgICAgICAgIHVybDogJy9wYWdlcy91dGlsL3Ntc1ZhbGlkYXRpb24vc21zVmFsaWRhdGlvbicsXG4gICAgICAgICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgICAgIGNvZGU6IChjb2RlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2goJ3Ntc0NvZGVWYWxpZGF0aW9uJywgeyBjb2RlIH0pLnRoZW4oY29kZVZhbGlkYXRpb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZVZhbGlkYXRpb24uY29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2godXJsLCBkYXRhLCBtZXRob2QpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEgYXMgYW55KVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ+efreS/oeagoemqjOmUmeivrydcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSBhcyBhbnkpXG4gICAgICAgIH0sXG4gICAgICAgIGZhaWw6IGUgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHsgZSB9KTtcblxuICAgICAgICAgIHd4LnNob3dUb2FzdCh7IHRpdGxlOiAn5pyN5Yqh5Zmo6ZSZ6K+vJywgY29udGVudDogZS5lcnJNc2cgfSlcbiAgICAgICAgICB3eC5oaWRlTG9hZGluZygpXG4gICAgICAgICAgcmVqZWN0KGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgYXBpKClcbiJdfQ==