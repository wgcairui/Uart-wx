"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("../config");
class api {
    constructor() {
        this.token = "";
    }
    setToken(token) {
        this.token = token;
        wx.setBackgroundFetchToken({
            token
        });
    }
    async login(data) {
        const el = await this.fetch("auth/code2Session", data, "GET");
        if (el.code) {
            this.setToken(el.data.token);
        }
        return el;
    }
    async userlogin(data) {
        const el = await this.fetch('auth/wplogin', data);
        if (el.code) {
            this.setToken(el.data.token);
        }
        return el;
    }
    updateAvanter(nickName, avanter) {
        return this.fetch('updateAvanter', { nickName, avanter });
    }
    async unbindwx() {
        const el = await this.fetch('unbindwx');
        this.token = "";
        return el;
    }
    getphonenumber(data) {
        return this.fetch("auth/getphonenumber", data);
    }
    registerUser(data) {
        return this.fetch("auth/wxRegister", data);
    }
    bindDev(mac) {
        return this.fetch('bindDev', { mac });
    }
    getAlarmunconfirmed() {
        return this.fetch('getAlarmunconfirmed');
    }
    getGPSaddress(location) {
        return this.fetch('getGPSaddress', { location });
    }
    async cancelwx() {
        const el = await this.fetch('cancelwx');
        this.token = "";
        return el;
    }
    addVm() {
        return this.fetch('addVm');
    }
    modifyDTUName(dtu, name) {
        return this.fetch('modifyDTUName', { dtu, name });
    }
    updateGps(mac, jw) {
        return this.fetch('updateGps', { mac, jw });
    }
    webLogin(code) {
        return this.fetch('webLogin', { code, token: this.token });
    }
    addUser(name, user, passwd, tel, mail, company) {
        return this.fetch("guest/addUser", { name, user, passwd, tel, mail, company });
    }
    resetPasswdValidation(user) {
        return this.fetch("guest/resetPasswdValidation", { user });
    }
    resetUserPasswd(user, passwd, code) {
        return this.fetch("guest/resetUserPasswd", { user, passwd, code });
    }
    wxlogin(code, state) {
        return this.fetch("auth/wxlogin", { code, state });
    }
    crc(data) {
        return this.fetch("open//crc", { data });
    }
    BindDev() {
        return this.fetch("BindDev");
    }
    userInfo() {
        return this.fetch("userInfo");
    }
    getAlarm(start = new Date().toLocaleDateString().replace(/\//g, "-") + " 0:00:00", end = new Date().toLocaleDateString().replace(/\//g, "-") + " 23:59:59") {
        return this.fetch("loguartterminaldatatransfinites", { start, end });
    }
    confrimAlarm(id) {
        return this.fetch("confrimAlarm", { id });
    }
    getTerminalOnline(mac) {
        return this.fetch("getTerminalOnline", { mac });
    }
    modifyTerminal(mac, name) {
        return this.fetch('modifyTerminal', { mac, name });
    }
    addUserTerminal(mac) {
        return this.fetch("addUserTerminal", { mac });
    }
    delUserTerminal(mac) {
        return this.fetch("delUserTerminal", { mac });
    }
    getDevTypes(Type) {
        return this.fetch("getDevTypes", { Type });
    }
    delTerminalMountDev(mac, pid) {
        return this.fetch("delTerminalMountDev", { mac, pid });
    }
    addTerminalMountDev(mac, mountDev) {
        return this.fetch("addTerminalMountDev", { mac, mountDev });
    }
    getUserAlarmSetup() {
        return this.fetch("getUserAlarmSetup");
    }
    modifyUserAlarmSetupTel(tels, mails) {
        return this.fetch("modifyUserAlarmSetupTel", { tels, mails });
    }
    modifyUserInfo(data) {
        return this.fetch("modifyUserInfo", { data });
    }
    mpTicket() {
        return this.fetch("mpTicket");
    }
    wpTicket() {
        return this.fetch("wpTicket");
    }
    getUserAlarmProtocol(protocol) {
        return this.fetch("getUserAlarmProtocol", { protocol });
    }
    getAlarmProtocol(protocol) {
        return this.fetch("getAlarmProtocol", { protocol });
    }
    getTerminalData(mac, pid) {
        return this.fetch("getTerminalData", { mac, pid });
    }
    getTerminalDatas(mac, pid, name, datetime) {
        return this.fetch("getTerminalDatas", { mac, pid, name, datetime });
    }
    refreshDevTimeOut(mac, pid) {
        return this.fetch("refreshDevTimeOut", { mac, pid });
    }
    SendProcotolInstructSet(query, item) {
        return this.fetch("SendProcotolInstructSet", { query, item });
    }
    getProtocol(protocol) {
        return this.fetch("getProtocol", { protocol });
    }
    setUserSetupProtocol(protocol, type, arg) {
        return this.fetch("setUserSetupProtocol", { protocol, type, arg });
    }
    setAlias(mac, pid, protocol, name, alias) {
        return this.fetch("setAlias", { mac, pid, protocol, name, alias });
    }
    getTerminal(mac) {
        return this.fetch("getTerminal", { mac });
    }
    getUserLayout(id) {
        return this.fetch("getUserLayout", { id });
    }
    getAggregation(id) {
        return this.fetch("getAggregation", { id });
    }
    addAggregation(name, aggs) {
        return this.fetch("addAggregation", { name, aggs });
    }
    deleteAggregation(id) {
        return this.fetch("deleteAggregation", { id });
    }
    setUserLayout(id, type, bg, Layout) {
        return this.fetch("setUserLayout", { id, type, bg, Layout });
    }
    V2_API_Aamp_gps2autoanvi(locations, coordsys = "gps") {
        return this.fetch('util/AMap/GPS2autonavi', { coordsys, locations: Array.isArray(locations) ? locations.join("|") : locations });
    }
    V2_API_Aamp_ip2local(ip) {
        return this.fetch("util/AMap/IP2loction", { ip });
    }
    iotRemoteUrl(mac) {
        return this.fetch('root/iotRemoteUrl', { mac });
    }
    Nodes() {
        return this.fetch("root/Nodes");
    }
    addRegisterTerminal(DevMac, mountNode) {
        return this.fetch("root/addRegisterTerminal", { DevMac, mountNode });
    }
    getRootTerminal(mac) {
        return this.fetch("getTerminal", { mac });
    }
    addRegisterDev(ids, mountDev) {
        return this.fetch("root/addRegisterDev", { ids, mountDev });
    }
    getRegisterDev(id) {
        return this.fetch("getRegisterDev", { id });
    }
    delRegisterDev(id) {
        return this.fetch("root/delRegisterDev", { id });
    }
    getRegisterDevs() {
        return this.fetch("root/getRegisterDevs");
    }
    sendATInstruct(mac, content) {
        return this.fetch("root/sendATInstruct", { mac, content });
    }
    initTerminal(mac) {
        return this.fetch("root/initTerminal", { mac });
    }
    async fetch(url, data = {}, method = "POST") {
        const token = this.token || await wx.getStorage({ key: 'token' }).then(el => el.data).catch(() => "");
        return await new Promise((resolve, reject) => {
            wx.request({
                timeout: 1000 * 60,
                url: config_1.urlRequest + "/api/" + url,
                data,
                method,
                enableHttp2: true,
                header: { token, type: 'wp' },
                success: res => {
                    if (res.data.code === 201) {
                        wx.navigateTo({
                            url: '/pages/util/smsValidation/smsValidation',
                            events: {
                                code: (code) => {
                                    this.fetch('smsCodeValidation', { code }).then(codeValidation => {
                                        if (codeValidation.code) {
                                            this.fetch(url, data, method).then(res => {
                                                resolve(res.data);
                                            });
                                        }
                                        else {
                                            wx.showModal({
                                                title: 'error',
                                                content: '短信校验错误'
                                            });
                                            throw new Error();
                                        }
                                    });
                                }
                            }
                        });
                    }
                    else
                        resolve(res.data);
                },
                fail: e => {
                    wx.showToast({ title: '服务器错误', content: e.errMsg });
                    wx.hideLoading();
                    reject(e);
                }
            });
        });
    }
}
exports.default = new api();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQXNDO0FBd0J0QyxNQUFNLEdBQUc7SUFHUDtRQUNFLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFBO0lBQ2pCLENBQUM7SUFFRCxRQUFRLENBQUMsS0FBYTtRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtRQUNsQixFQUFFLENBQUMsdUJBQXVCLENBQUM7WUFDekIsS0FBSztTQUNOLENBQUMsQ0FBQTtJQW9CSixDQUFDO0lBTUQsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUF5QztRQUNuRCxNQUFNLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQW9CLG1CQUFtQixFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNoRixJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUU7WUFDWCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7U0FDN0I7UUFDRCxPQUFPLEVBQUUsQ0FBQTtJQUNYLENBQUM7SUFNRCxLQUFLLENBQUMsU0FBUyxDQUFDLElBQXdGO1FBQ3RHLE1BQU0sRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBb0IsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3BFLElBQUksRUFBRSxDQUFDLElBQUksRUFBRTtZQUNYLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtTQUM3QjtRQUNELE9BQU8sRUFBRSxDQUFBO0lBQ1gsQ0FBQztJQU9ELGFBQWEsQ0FBQyxRQUFnQixFQUFFLE9BQWU7UUFDN0MsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFLRCxLQUFLLENBQUMsUUFB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O0lBQ0osQ0FBQztDQUNGO0FBRUQsa0JBQWUsSUFBSSxHQUFHLEVBQUUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVybFJlcXVlc3QgfSBmcm9tIFwiLi4vY29uZmlnXCJcblxuaW50ZXJmYWNlIHRlbmNldE1hcCB7XG4gIC8qIOeKtuaAgeegge+8jDDkuLrmraPluLgsXG4zMTDor7fmsYLlj4LmlbDkv6Hmga/mnInor6/vvIxcbjMxMUtleeagvOW8j+mUmeivryxcbjMwNuivt+axguacieaKpOaMgeS/oeaBr+ivt+ajgOafpeWtl+espuS4sixcbjExMOivt+axguadpea6kOacquiiq+aOiOadgyAqL1xuICBzdGF0dXM6IG51bWJlcixcbiAgcmVxdWVzdF9pZDogc3RyaW5nLFxuICBtZXNzYWdlOiBzdHJpbmdcbiAgcmVzdWx0OiBhbnlcbn1cblxuaW50ZXJmYWNlIHJlc3VsdDxUID0gYW55PiB7XG4gIGNvZGU6IG51bWJlclxuICBkYXRhOiBUXG4gIG1zZzogc3RyaW5nXG4gIFt4OiBzdHJpbmddOiBhbnlcbn1cblxuLyoqXG4gKiBAY2xhc3Mgd3DlrqLmiLfnq6/nu5/kuIDor7fmsYJhcGlcbiAqL1xuY2xhc3MgYXBpIHtcbiAgdG9rZW46IHN0cmluZ1xuICB3cyE6IFdlY2hhdE1pbmlwcm9ncmFtLlNvY2tldFRhc2tcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50b2tlbiA9IFwiXCJcbiAgfVxuXG4gIHNldFRva2VuKHRva2VuOiBzdHJpbmcpIHtcbiAgICB0aGlzLnRva2VuID0gdG9rZW5cbiAgICB3eC5zZXRCYWNrZ3JvdW5kRmV0Y2hUb2tlbih7XG4gICAgICB0b2tlblxuICAgIH0pLyogXG4gICAgd3guc2V0U3RvcmFnZSh7IGtleTogJ3Rva2VuJywgZGF0YTogdG9rZW4gfSlcbiAgICBjb25zdCB3cyA9IHd4LmNvbm5lY3RTb2NrZXQoe1xuICAgICAgdXJsOiB1cmxXcyxcbiAgICAgIGhlYWRlcjoge1xuICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB0b2tlblxuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6KHJlcykgPT57XG4gICAgICAgIGNvbnNvbGUubG9nKHtyZXN9KTtcbiAgICAgICAgXG5cbiAgICAgIH0sXG4gICAgICBmYWlsKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKHtlcnJ9KTtcbiAgICAgICAgXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLndzID0gd3NcbiAgICB3cy5zZW5kKHtkYXRhOidzc3Nzc3NzJ30pICovXG4gIH1cblxuICAvKipcbiAgICog55m75b2VLSDln5/lkI1cbiAgICogQHBhcmFtIGRhdGEgXG4gICAqL1xuICBhc3luYyBsb2dpbihkYXRhOiB7IGpzX2NvZGU6IHN0cmluZywgc2NlbmU/OiBzdHJpbmcgfSkge1xuICAgIGNvbnN0IGVsID0gYXdhaXQgdGhpcy5mZXRjaDx7IHRva2VuOiBzdHJpbmcgfT4oXCJhdXRoL2NvZGUyU2Vzc2lvblwiLCBkYXRhLCBcIkdFVFwiKVxuICAgIGlmIChlbC5jb2RlKSB7XG4gICAgICB0aGlzLnNldFRva2VuKGVsLmRhdGEudG9rZW4pXG4gICAgfVxuICAgIHJldHVybiBlbFxuICB9XG5cbiAgLyoqXG4gICAqIOeZu+W9lS3nlKjkuo7lsI/nqIvluo/nmbvlvZXpobXpnaLnmbvlvZVcbiAgICogQHBhcmFtIGRhdGEgXG4gICAqL1xuICBhc3luYyB1c2VybG9naW4oZGF0YTogeyBvcGVuaWQ6IHN0cmluZywgdW5pb25pZDogc3RyaW5nLCBhdmFudGVyOiBzdHJpbmcsIHVzZXI6IHN0cmluZywgcGFzc3dkOiBzdHJpbmcgfSkge1xuICAgIGNvbnN0IGVsID0gYXdhaXQgdGhpcy5mZXRjaDx7IHRva2VuOiBzdHJpbmcgfT4oJ2F1dGgvd3Bsb2dpbicsIGRhdGEpXG4gICAgaWYgKGVsLmNvZGUpIHtcbiAgICAgIHRoaXMuc2V0VG9rZW4oZWwuZGF0YS50b2tlbilcbiAgICB9XG4gICAgcmV0dXJuIGVsXG4gIH1cblxuICAvKipcbiAgICog5pu05paw55So5oi35aS05YOP5ZKM5pi156ewXG4gICAqIEBwYXJhbSBuaWNrTmFtZSDmmLXnp7BcbiAgICogQHBhcmFtIGF2YW50ZXIg5aS05YOP6ZO+5o6lXG4gICAqL1xuICB1cGRhdGVBdmFudGVyKG5pY2tOYW1lOiBzdHJpbmcsIGF2YW50ZXI6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKCd1cGRhdGVBdmFudGVyJywgeyBuaWNrTmFtZSwgYXZhbnRlciB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOeUqOS6juino+e7keW+ruS/oeWSjOmAj+S8oOi0puWPt+eahOe7keWumuWFs+ezu1xuICAgKi9cbiAgYXN5bmMgdW5iaW5kd3goKSB7XG4gICAgY29uc3QgZWwgPSBhd2FpdCB0aGlzLmZldGNoKCd1bmJpbmR3eCcpXG4gICAgdGhpcy50b2tlbiA9IFwiXCJcbiAgICByZXR1cm4gZWxcbiAgfVxuXG4gIC8qKlxuICAgKiDop6Plr4bnlLXor53lrZfnrKbkuLJcbiAgICogQHBhcmFtIGRhdGEgXG4gICAqL1xuICBnZXRwaG9uZW51bWJlcihkYXRhOiB7IG9wZW5pZDogc3RyaW5nLCBlbmNyeXB0ZWREYXRhOiBzdHJpbmcsIGl2OiBzdHJpbmcgfSkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHsgcGhvbmVOdW1iZXI6IHN0cmluZyB9PihcImF1dGgvZ2V0cGhvbmVudW1iZXJcIiwgZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhoxcbiAgICogQHBhcmFtIGRhdGEgXG4gICAqL1xuICByZWdpc3RlclVzZXIoZGF0YTogeyB1c2VyOiBzdHJpbmcsIG9wZW5pZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIHRlbDogc3RyaW5nLCBhdmFudGVyOiBzdHJpbmcgfSkge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwiYXV0aC93eFJlZ2lzdGVyXCIsIGRhdGEpXG4gIH1cblxuICAvKipcbiAgICog57uR5a6aRFRVXG4gICAqIEBwYXJhbSBtYWMgXG4gICAqL1xuICBiaW5kRGV2KG1hYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8YW55PignYmluZERldicsIHsgbWFjIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5pyq56Gu6K6k5ZGK6K2m5pWw6YePXG4gICAqL1xuICBnZXRBbGFybXVuY29uZmlybWVkKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPG51bWJlcj4oJ2dldEFsYXJtdW5jb25maXJtZWQnKVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlmdwc+WumuS9jeeahOivpue7huWcsOWdgFxuICAgKiBAcGFyYW0gbG9jYXRpb24gXG4gICAqL1xuICBnZXRHUFNhZGRyZXNzKGxvY2F0aW9uOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxhbnk+KCdnZXRHUFNhZGRyZXNzJywgeyBsb2NhdGlvbiB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOazqOmUgOW+ruS/oVxuICAgKi9cbiAgYXN5bmMgY2FuY2Vsd3goKSB7XG4gICAgY29uc3QgZWwgPSBhd2FpdCB0aGlzLmZldGNoPHN0cmluZz4oJ2NhbmNlbHd4JylcbiAgICB0aGlzLnRva2VuID0gXCJcIlxuICAgIHJldHVybiBlbFxuICB9XG5cblxuXG4gIC8qKlxuICAgKiDmt7vliqDomZrmi5/orr7lpIdcbiAgICovXG4gIGFkZFZtKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuVGVybWluYWxbXT4oJ2FkZFZtJylcbiAgfVxuXG4gIC8qKlxuICAgKiDkv67mlLlEVFXlkI3np7BcbiAgICogQHBhcmFtIGR0dSBtYWNcbiAgICogQHBhcmFtIG5hbWUg5paw55qE5ZCN56ewXG4gICAqL1xuICBtb2RpZnlEVFVOYW1lKGR0dTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxzdHJpbmc+KCdtb2RpZnlEVFVOYW1lJywgeyBkdHUsIG5hbWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDmm7TmlrBkdHXlrprkvY1cbiAgICogQHBhcmFtIGR0dSBkdHVNYWNcbiAgICogQHBhcmFtIGp3IOe7j+e6rOW6plxuICAgKi9cbiAgdXBkYXRlR3BzKG1hYzogc3RyaW5nLCBqdzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8c3RyaW5nPigndXBkYXRlR3BzJywgeyBtYWMsIGp3IH0pXG4gIH1cblxuICAvKipcbiAgICogd2Vi55m75b2VXG4gICAqIEBwYXJhbSBjb2RlIHRva2VuXG4gICAqL1xuICB3ZWJMb2dpbihjb2RlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxzdHJpbmc+KCd3ZWJMb2dpbicsIHsgY29kZSwgdG9rZW46IHRoaXMudG9rZW4gfSlcbiAgfVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4gIC8qKlxuICAgKiDmt7vliqDnlKjmiLdcbiAgICogQHBhcmFtIG5hbWUgXG4gICAqIEBwYXJhbSB1c2VyIFxuICAgKiBAcGFyYW0gcGFzc3dkIFxuICAgKiBAcGFyYW0gdGVsIHhcbiAgICogQHBhcmFtIG1haWwgXG4gICAqIEBwYXJhbSBjb21wYW55IFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGFkZFVzZXIobmFtZTogc3RyaW5nLCB1c2VyOiBzdHJpbmcsIHBhc3N3ZDogc3RyaW5nLCB0ZWw6IHN0cmluZywgbWFpbDogc3RyaW5nLCBjb21wYW55OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImd1ZXN0L2FkZFVzZXJcIiwgeyBuYW1lLCB1c2VyLCBwYXNzd2QsIHRlbCwgbWFpbCwgY29tcGFueSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOmHjee9ruWvhueggeWIsOWPkemAgemqjOivgeeggVxuICAgKiBAcGFyYW0gdXNlciBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICByZXNldFBhc3N3ZFZhbGlkYXRpb24odXNlcjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJndWVzdC9yZXNldFBhc3N3ZFZhbGlkYXRpb25cIiwgeyB1c2VyIH0pXG4gIH1cblxuICAvKipcbiAgICog6YeN572u55So5oi35a+G56CBXG4gICAqIEBwYXJhbSB1c2VyIFxuICAgKiBAcGFyYW0gcGFzc3dkIFxuICAgKiBAcGFyYW0gY29kZSBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICByZXNldFVzZXJQYXNzd2QodXNlcjogc3RyaW5nLCBwYXNzd2Q6IHN0cmluZywgY29kZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJndWVzdC9yZXNldFVzZXJQYXNzd2RcIiwgeyB1c2VyLCBwYXNzd2QsIGNvZGUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDlvq7kv6HnmbvlvZVcbiAgICogQHBhcmFtIGNvZGUgXG4gICAqIEBwYXJhbSBzdGF0ZSBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICB3eGxvZ2luKGNvZGU6IHN0cmluZywgc3RhdGU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwiYXV0aC93eGxvZ2luXCIsIHsgY29kZSwgc3RhdGUgfSlcbiAgfVxuXG4gIGNyYyhkYXRhOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxzdHJpbmc+KFwib3Blbi8vY3JjXCIsIHsgZGF0YSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlueUqOaIt+e7keWumuiuvuWkh1xuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIEJpbmREZXYoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5CaW5kRGV2aWNlPihcIkJpbmREZXZcIilcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bnlKjmiLfkv6Hmga9cbiAgICogQHJldHVybnMgXG4gICAqL1xuICB1c2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LlVzZXJJbmZvPihcInVzZXJJbmZvXCIpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W55So5oi35ZGK6K2mXG4gICAqIEBwYXJhbSBzdGFydCBcbiAgICogQHBhcmFtIGVuZCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBnZXRBbGFybShzdGFydDogc3RyaW5nID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKS5yZXBsYWNlKC9cXC8vZywgXCItXCIpICsgXCIgMDowMDowMFwiLCBlbmQ6IHN0cmluZyA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCkucmVwbGFjZSgvXFwvL2csIFwiLVwiKSArIFwiIDIzOjU5OjU5XCIpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDwoVWFydC51YXJ0QWxhcm1PYmplY3QgJiB7IHRpbWU6IHN0cmluZyB9KVtdPihcImxvZ3VhcnR0ZXJtaW5hbGRhdGF0cmFuc2Zpbml0ZXNcIiwgeyBzdGFydCwgZW5kIH0pXG4gIH1cblxuICAvKipcbiAgICog56Gu6K6k55So5oi35ZGK6K2mXG4gICAqIEBwYXJhbSBpZCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBjb25mcmltQWxhcm0oaWQ/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImNvbmZyaW1BbGFybVwiLCB7IGlkIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5oyH5a6a5LiU5Zyo57q/55qE57uI56uvXG4gICAqIEBwYXJhbSBtYWMgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgZ2V0VGVybWluYWxPbmxpbmUobWFjOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LlRlcm1pbmFsIHwgbnVsbD4oXCJnZXRUZXJtaW5hbE9ubGluZVwiLCB7IG1hYyB9KVxuICB9XG5cbiAgLyoqXG4gICog5L+u5pS555So5oi36K6+5aSH5Yir5ZCNXG4gICogQHBhcmFtIG1hYyBcbiAgKiBAcGFyYW0gbmFtZSBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgbW9kaWZ5VGVybWluYWwobWFjOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKCdtb2RpZnlUZXJtaW5hbCcsIHsgbWFjLCBuYW1lIH0pXG4gIH1cblxuICAvKipcbiAgKiDmt7vliqDnu5Hlrprorr7lpIdcbiAgKiBAcGFyYW0gbWFjIFxuICAqL1xuICBhZGRVc2VyVGVybWluYWwobWFjOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcImFkZFVzZXJUZXJtaW5hbFwiLCB7IG1hYyB9KVxuICB9XG5cbiAgLyoqXG4gICog5Yig6Zmk57uR5a6a6K6+5aSHXG4gICogQHBhcmFtIG1hYyBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgZGVsVXNlclRlcm1pbmFsKG1hYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJkZWxVc2VyVGVybWluYWxcIiwgeyBtYWMgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOiOt+WPluiuvuWkh+exu+Wei1xuICAqIEBwYXJhbSBUeXBlIFxuICAqIEByZXR1cm5zIFxuICAqL1xuICBnZXREZXZUeXBlcyhUeXBlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LkRldnNUeXBlW10+KFwiZ2V0RGV2VHlwZXNcIiwgeyBUeXBlIH0pXG4gIH1cblxuICAvKipcbiAgKiDliKDpmaTnu4jnq6/mjILovb3orr7lpIdcbiAgKiBAcGFyYW0gbWFjIFxuICAqIEBwYXJhbSBwaWQgXG4gICovXG4gIGRlbFRlcm1pbmFsTW91bnREZXYobWFjOiBzdHJpbmcsIHBpZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJkZWxUZXJtaW5hbE1vdW50RGV2XCIsIHsgbWFjLCBwaWQgfSlcbiAgfVxuXG4gIC8qKlxuICAqIMKgwqDmt7vliqDnlKjmiLfnu4jnq6/mjILovb3orr7lpIdcbiAgKiBAcGFyYW0gbWFjIFxuICAqIEBwYXJhbSBwYXJhbTIgXG4gICogQHJldHVybnMgXG4gICovXG4gIGFkZFRlcm1pbmFsTW91bnREZXYobWFjOiBzdHJpbmcsIG1vdW50RGV2OiBVYXJ0LlRlcm1pbmFsTW91bnREZXZzKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJhZGRUZXJtaW5hbE1vdW50RGV2XCIsIHsgbWFjLCBtb3VudERldiB9KVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W55So5oi35ZGK6K2m6YWN572uXG4gICogQHBhcmFtIHVzZXIgXG4gICogQHBhcmFtIGZpbHRlciBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgZ2V0VXNlckFsYXJtU2V0dXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC51c2VyU2V0dXA+KFwiZ2V0VXNlckFsYXJtU2V0dXBcIilcbiAgfVxuXG4gIC8qKlxuICAqIOS/ruaUueeUqOaIt+WRiuitpumFjee9ruiBlOezu+aWueW8j1xuICAqIEBwYXJhbSB0ZWxzIOiBlOezu+eUteivnVxuICAqIEBwYXJhbSBtYWlscyDogZTns7vpgq7nrrFcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgbW9kaWZ5VXNlckFsYXJtU2V0dXBUZWwodGVsczogc3RyaW5nW10sIG1haWxzOiBzdHJpbmdbXSkge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwibW9kaWZ5VXNlckFsYXJtU2V0dXBUZWxcIiwgeyB0ZWxzLCBtYWlscyB9KVxuICB9XG5cbiAgLyoqXG4gICog5L+u5pS555So5oi35L+h5oGvXG4gICogQHBhcmFtIHVzZXIgXG4gICogQHBhcmFtIGRhdGEgXG4gICogQHJldHVybnMgXG4gICovXG4gIG1vZGlmeVVzZXJJbmZvKGRhdGE6IFBhcnRpYWw8VWFydC5Vc2VySW5mbz4pIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcIm1vZGlmeVVzZXJJbmZvXCIsIHsgZGF0YSB9KVxuICB9XG5cbiAgLyoqXG4gICog6I635Y+W5YWs5LyX5Y+35LqM57u056CBXG4gICogQHBhcmFtIHVzZXIgXG4gICogQHJldHVybnMgXG4gICovXG4gIG1wVGlja2V0KCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwibXBUaWNrZXRcIilcbiAgfVxuXG4gIC8qKlxuICAqIOiOt+WPluWwj+eoi+W6j+S6jOe7tOeggVxuICAqIEBwYXJhbSB1c2VyIFxuICAqIEByZXR1cm5zIFxuICAqL1xuICB3cFRpY2tldCgpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcIndwVGlja2V0XCIpXG4gIH1cblxuXG4gIC8qKlxuICAqIOiOt+WPlueUqOaIt+WNleS4quWNj+iuruWRiuitpumFjee9rlxuICAqIEBwYXJhbSBwcm90b2NvbCBcbiAgKi9cbiAgZ2V0VXNlckFsYXJtUHJvdG9jb2wocHJvdG9jb2w6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuUHJvdG9jb2xDb25zdGFudFRocmVzaG9sZD4oXCJnZXRVc2VyQWxhcm1Qcm90b2NvbFwiLCB7IHByb3RvY29sIH0pXG4gIH1cblxuICAvKipcbiAgKiDojrflj5bljZXkuKrljY/orq7lkYrorabphY3nva5cbiAgKiBAcGFyYW0gcHJvdG9jb2wgXG4gICovXG4gIGdldEFsYXJtUHJvdG9jb2wocHJvdG9jb2w6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuUHJvdG9jb2xDb25zdGFudFRocmVzaG9sZD4oXCJnZXRBbGFybVByb3RvY29sXCIsIHsgcHJvdG9jb2wgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOiOt+WPlueUqOaIt+iuvuWkh+i/kOihjOaVsOaNrlxuICAqIEBwYXJhbSBtYWMgXG4gICogQHBhcmFtIHBpZCBcbiAgKi9cbiAgZ2V0VGVybWluYWxEYXRhKG1hYzogc3RyaW5nLCBwaWQ6IG51bWJlciB8IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQucXVlcnlSZXN1bHRTYXZlPihcImdldFRlcm1pbmFsRGF0YVwiLCB7IG1hYywgcGlkIH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W55So5oi36K6+5aSH5Y6G5Y+y6L+Q6KGM5pWw5o2uXG4gICAqIEBwYXJhbSBtYWMgXG4gICAqIEBwYXJhbSBwaWQgXG4gICAqIEBwYXJhbSBuYW1lIFxuICAgKiBAcGFyYW0gZGF0ZXRpbWUgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgZ2V0VGVybWluYWxEYXRhcyhtYWM6IHN0cmluZywgcGlkOiBudW1iZXIgfCBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGF0ZXRpbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQucXVlcnlSZXN1bHRTYXZlW10+KFwiZ2V0VGVybWluYWxEYXRhc1wiLCB7IG1hYywgcGlkLCBuYW1lLCBkYXRldGltZSB9KVxuICB9XG5cbiAgLyoqXG4gICog6YeN572u6K6+5aSH6LaF5pe254q25oCBXG4gICogQHBhcmFtIG1hYyBcbiAgKiBAcGFyYW0gcGlkIFxuICAqL1xuICByZWZyZXNoRGV2VGltZU91dChtYWM6IHN0cmluZywgcGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcInJlZnJlc2hEZXZUaW1lT3V0XCIsIHsgbWFjLCBwaWQgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOWbuuWumuWPkemAgeiuvuWkh+aTjeS9nOaMh+S7pFxuICAqIEBwYXJhbSBxdWVyeSBcbiAgKiBAcGFyYW0gaXRlbSBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgU2VuZFByb2NvdG9sSW5zdHJ1Y3RTZXQocXVlcnk6IFVhcnQuaW5zdHJ1Y3RRdWVyeUFyZywgaXRlbTogVWFydC5PcHJhdGVJbnN0cnVjdCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuQXBvbGxvTW9uZ29SZXN1bHQ+KFwiU2VuZFByb2NvdG9sSW5zdHJ1Y3RTZXRcIiwgeyBxdWVyeSwgaXRlbSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluaMh+WumuWNj+iurlxuICAgKiBAcGFyYW0gcHJvdG9jb2wgXG4gICAqIEByZXR1cm5zIFxuICAgKi9cbiAgZ2V0UHJvdG9jb2wocHJvdG9jb2w6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQucHJvdG9jb2w+KFwiZ2V0UHJvdG9jb2xcIiwgeyBwcm90b2NvbCB9KVxuICB9XG5cbiAgLyoqXG4gICog6K6+572u55So5oi36Ieq5a6a5LmJ6K6+572uKOWNj+iurumFjee9rilcbiAgKiBAcGFyYW0gUHJvdG9jb2wg5Y2P6K6uXG4gICogQHBhcmFtIHR5cGUg5pON5L2c57G75Z6LXG4gICogQHBhcmFtIGFyZyDlj4LmlbBcbiAgKiBAcmV0dXJucyBcbiAgKi9cbiAgc2V0VXNlclNldHVwUHJvdG9jb2wocHJvdG9jb2w6IHN0cmluZywgdHlwZTogVWFydC5Db25zdGFudFRocmVzaG9sZFR5cGUsIGFyZzogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJzZXRVc2VyU2V0dXBQcm90b2NvbFwiLCB7IHByb3RvY29sLCB0eXBlLCBhcmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7lpIforr7lpIfliKvlkI1cbiAgICogQHBhcmFtIG1hYyBcbiAgICogQHBhcmFtIHBpZCBcbiAgICogQHBhcmFtIHByb3RvY29sIFxuICAgKiBAcGFyYW0gbmFtZSBcbiAgICogQHBhcmFtIGFsaWFzIFxuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIHNldEFsaWFzKG1hYzogc3RyaW5nLCBwaWQ6IG51bWJlciwgcHJvdG9jb2w6IHN0cmluZywgbmFtZTogc3RyaW5nLCBhbGlhczogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJzZXRBbGlhc1wiLCB7IG1hYywgcGlkLCBwcm90b2NvbCwgbmFtZSwgYWxpYXMgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOiOt+WPlue7iOerr+S/oeaBr1xuICAqIEBwYXJhbSBtYWMgXG4gICogQHJldHVybnMgXG4gICovXG4gIGdldFRlcm1pbmFsKG1hYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5UZXJtaW5hbD4oXCJnZXRUZXJtaW5hbFwiLCB7IG1hYyB9KVxuICB9XG5cbiAgLyoqXG4gICogIOiOt+WPlueUqOaIt+W4g+WxgOmFjee9rlxuICAqIEBwYXJhbSBpZCBcbiAgKi9cbiAgZ2V0VXNlckxheW91dChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC51c2VyTGF5b3V0PihcImdldFVzZXJMYXlvdXRcIiwgeyBpZCB9KVxuICB9XG5cbiAgLyoqXG4gICogIOiOt+WPlueUqOaIt+W4g+WxgOmFjee9rlxuICAqIEBwYXJhbSBpZCBcbiAgKi9cbiAgZ2V0QWdncmVnYXRpb24oaWQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuQWdncmVnYXRpb24+KFwiZ2V0QWdncmVnYXRpb25cIiwgeyBpZCB9KVxuICB9XG5cbiAgLyoqXG4gICog5re75Yqg6IGa5ZCI6K6+5aSHXG4gICogQHBhcmFtIG5hbWUgXG4gICogQHBhcmFtIGFnZ3MgXG4gICogQHJldHVybnMgXG4gICovXG4gIGFkZEFnZ3JlZ2F0aW9uKG5hbWU6IHN0cmluZywgYWdnczogVWFydC5BZ2dyZWdhdGlvbkRldltdKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJhZGRBZ2dyZWdhdGlvblwiLCB7IG5hbWUsIGFnZ3MgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDliKDpmaTogZrlkIjorr7lpIdcbiAgICogQHBhcmFtIHVzZXIgXG4gICAqIEBwYXJhbSBpZCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBkZWxldGVBZ2dyZWdhdGlvbihpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJkZWxldGVBZ2dyZWdhdGlvblwiLCB7IGlkIH0pXG4gIH1cblxuICAvKipcbiAgKiDorr7nva7nlKjmiLfluIPlsYDphY3nva5cbiAgKiBAcGFyYW0gaWQgXG4gICogQHBhcmFtIHR5cGUgXG4gICogQHBhcmFtIGJnIFxuICAqIEBwYXJhbSBMYXlvdXQgXG4gICovXG4gIHNldFVzZXJMYXlvdXQoaWQ6IHN0cmluZywgdHlwZTogc3RyaW5nLCBiZzogc3RyaW5nLCBMYXlvdXQ6IFVhcnQuQWdncmVnYXRpb25MYXlvdXROb2RlW10pIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LkFwb2xsb01vbmdvUmVzdWx0PihcInNldFVzZXJMYXlvdXRcIiwgeyBpZCwgdHlwZSwgYmcsIExheW91dCB9KVxuICB9XG5cblxuICAvLyBWMiBncHPovazpq5jlvrdncHNcbiAgVjJfQVBJX0FhbXBfZ3BzMmF1dG9hbnZpKGxvY2F0aW9uczogc3RyaW5nIHwgc3RyaW5nW10sIGNvb3Jkc3lzOiAnZ3BzJyB8ICdtYXBiYXInIHwgJ2JhaWR1JyA9IFwiZ3BzXCIpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxzdHJpbmcgfCBzdHJpbmdbXT4oJ3V0aWwvQU1hcC9HUFMyYXV0b25hdmknLCB7IGNvb3Jkc3lzLCBsb2NhdGlvbnM6IEFycmF5LmlzQXJyYXkobG9jYXRpb25zKSA/IGxvY2F0aW9ucy5qb2luKFwifFwiKSA6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgLy8gVjIgaXDovaxncHNcbiAgVjJfQVBJX0FhbXBfaXAybG9jYWwoaXA6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHN0cmluZz4oXCJ1dGlsL0FNYXAvSVAybG9jdGlvblwiLCB7IGlwIH0pXG4gIH1cblxuXG5cblxuXG5cblxuXG5cblxuXG4gIC8qKlxuICAqIOiOt+WPlmR0dei/nOeoi+iwg+ivlee9keWdgFxuICAqIEBwYXJhbSBtYWMgXG4gICovXG4gIGlvdFJlbW90ZVVybChtYWM6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPHN0cmluZz4oJ3Jvb3QvaW90UmVtb3RlVXJsJywgeyBtYWMgfSlcbiAgfVxuXG4gIC8qKlxuICAgICAqIOiOt+WPluaJgOacieiKgueCuVxuICAgICAqIEBwYXJhbSBuYW1lIFxuICAgICAqL1xuICBOb2RlcygpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0Lk5vZGVDbGllbnRbXT4oXCJyb290L05vZGVzXCIsKVxuICB9XG5cbiAgLyoqXG4gICAgICog5re75Yqg55m76K6w6K6+5aSHXG4gICAgICogQHBhcmFtIERldk1hYyBcbiAgICAgKiBAcGFyYW0gbW91bnROb2RlIFxuICAgICAqIEByZXR1cm5zIFxuICAgICAqL1xuICBhZGRSZWdpc3RlclRlcm1pbmFsKERldk1hYzogc3RyaW5nLCBtb3VudE5vZGU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKFwicm9vdC9hZGRSZWdpc3RlclRlcm1pbmFsXCIsIHsgRGV2TWFjLCBtb3VudE5vZGUgfSlcbiAgfVxuXG4gIC8qKlxuICAqIOiOt+WPlue7iOerr+S/oeaBr1xuICAqIEBwYXJhbSBtYWMgXG4gICogQHJldHVybnMgXG4gICovXG4gIGdldFJvb3RUZXJtaW5hbChtYWM6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmZldGNoPFVhcnQuVGVybWluYWw+KFwiZ2V0VGVybWluYWxcIiwgeyBtYWMgfSlcbiAgfVxuXG5cbiAgLyoqXG4gICAgICog5rOo5YaM6K6+5aSHXG4gICAgICogQHBhcmFtIGRhdGEgXG4gICAgICovXG4gIGFkZFJlZ2lzdGVyRGV2KGlkczogc3RyaW5nW10sIG1vdW50RGV2OiBVYXJ0LlRlcm1pbmFsTW91bnREZXZzKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5yZWdpc3RlckRldltdPihcInJvb3QvYWRkUmVnaXN0ZXJEZXZcIiwgeyBpZHMsIG1vdW50RGV2IH0pXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5oyH5a6a5rOo5YaM6K6+5aSHXG4gICAqIEBwYXJhbSBpZCBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBnZXRSZWdpc3RlckRldihpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2g8VWFydC5yZWdpc3RlckRldj4oXCJnZXRSZWdpc3RlckRldlwiLCB7IGlkIH0pXG4gIH1cblxuICAvKipcbiAgICAgKiDliKDpmaTmjIflrprms6jlhozorr7lpIdcbiAgICAgKiBAcGFyYW0gaWQgXG4gICAgICogQHJldHVybnMgXG4gICAgICovXG4gIGRlbFJlZ2lzdGVyRGV2KGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaChcInJvb3QvZGVsUmVnaXN0ZXJEZXZcIiwgeyBpZCB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluaMh+WumuaJgOacieiuvuWkh1xuICAgKiBAcmV0dXJucyBcbiAgICovXG4gIGdldFJlZ2lzdGVyRGV2cygpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LnJlZ2lzdGVyRGV2W10+KFwicm9vdC9nZXRSZWdpc3RlckRldnNcIilcbiAgfVxuXG5cbiAgLyoqXG4gICAgICAgICAqIOWbuuWumuWPkemAgURUVSBBVOaMh+S7pFxuICAgICAgICAgKiBAcmV0dXJucyBcbiAgICAgICAgICovXG4gIHNlbmRBVEluc3RydWN0KG1hYzogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaDxVYXJ0LkFwb2xsb01vbmdvUmVzdWx0PihcInJvb3Qvc2VuZEFUSW5zdHJ1Y3RcIiwgeyBtYWMsIGNvbnRlbnQgfSlcbiAgfVxuXG5cbiAgLyoqXG4gICAqIOWIneWni+WMlmR0dVxuICAgKiBAcGFyYW0gbWFjIFxuICAgKi9cbiAgaW5pdFRlcm1pbmFsKG1hYzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goXCJyb290L2luaXRUZXJtaW5hbFwiLCB7IG1hYyB9KVxuICB9XG5cblxuXG5cblxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgYXBp6YCa55SocmVxdXN05pa55rOVXG4gICAqIEBwYXJhbSBvYmplY3QgXG4gICAqL1xuICBhc3luYyBmZXRjaDxUPih1cmw6IHN0cmluZywgZGF0YTogT2JqZWN0ID0ge30sIG1ldGhvZDogXCJHRVRcIiB8IFwiUE9TVFwiID0gXCJQT1NUXCIpIHtcbiAgICBjb25zdCB0b2tlbjogc3RyaW5nID0gdGhpcy50b2tlbiB8fCBhd2FpdCB3eC5nZXRTdG9yYWdlKHsga2V5OiAndG9rZW4nIH0pLnRoZW4oZWwgPT4gZWwuZGF0YSkuY2F0Y2goKCkgPT4gXCJcIilcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8cmVzdWx0PFQ+PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB3eC5yZXF1ZXN0PHJlc3VsdDxUPj4oe1xuICAgICAgICB0aW1lb3V0OiAxMDAwICogNjAsXG4gICAgICAgIHVybDogdXJsUmVxdWVzdCArIFwiL2FwaS9cIiArIHVybCxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbWV0aG9kLFxuICAgICAgICBlbmFibGVIdHRwMjogdHJ1ZSxcbiAgICAgICAgaGVhZGVyOiB7IHRva2VuLCB0eXBlOiAnd3AnIH0sXG4gICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7XG4gICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMSkge1xuICAgICAgICAgICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICAgICAgICAgIHVybDogJy9wYWdlcy91dGlsL3Ntc1ZhbGlkYXRpb24vc21zVmFsaWRhdGlvbicsXG4gICAgICAgICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgICAgIGNvZGU6IChjb2RlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2goJ3Ntc0NvZGVWYWxpZGF0aW9uJywgeyBjb2RlIH0pLnRoZW4oY29kZVZhbGlkYXRpb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZVZhbGlkYXRpb24uY29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2godXJsLCBkYXRhLCBtZXRob2QpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEgYXMgYW55KVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgd3guc2hvd01vZGFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ+efreS/oeagoemqjOmUmeivrydcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSBhcyBhbnkpXG4gICAgICAgIH0sXG4gICAgICAgIGZhaWw6IGUgPT4ge1xuICAgICAgICAgIHd4LnNob3dUb2FzdCh7IHRpdGxlOiAn5pyN5Yqh5Zmo6ZSZ6K+vJywgY29udGVudDogZS5lcnJNc2cgfSlcbiAgICAgICAgICB3eC5oaWRlTG9hZGluZygpXG4gICAgICAgICAgcmVqZWN0KGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgYXBpKClcbiJdfQ==